<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ò—Ç–∞–ª—å—è–Ω—Å–∫–∏–π A0-A1</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
        }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        const Mic = ({ size = 20, className = "" }) => (
            <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z"></path>
                <path d="M19 10v2a7 7 0 0 1-14 0v-2"></path>
                <line x1="12" y1="19" x2="12" y2="23"></line>
                <line x1="8" y1="23" x2="16" y2="23"></line>
            </svg>
        );

        const MicOff = ({ size = 20, className = "" }) => (
            <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <line x1="2" y1="2" x2="22" y2="22"></line>
                <path d="M18.89 13.23A7.12 7.12 0 0 0 19 12v-2"></path>
                <path d="M5 10v2a7 7 0 0 0 12 5"></path>
                <path d="M15 9.34V5a3 3 0 0 0-5.68-1.33"></path>
                <path d="M9 9v3a3 3 0 0 0 5.12 2.12"></path>
                <line x1="12" y1="19" x2="12" y2="23"></line>
                <line x1="8" y1="23" x2="16" y2="23"></line>
            </svg>
        );

        const Volume2 = ({ size = 20, className = "" }) => (
            <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>
                <path d="M15.54 8.46a5 5 0 0 1 0 7.07"></path>
                <path d="M19.07 4.93a10 10 0 0 1 0 14.14"></path>
            </svg>
        );

        const RotateCcw = ({ size = 16, className = "" }) => (
            <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"></path>
                <path d="M3 3v5h5"></path>
            </svg>
        );

        const CheckCircle = ({ size = 20, className = "" }) => (
            <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                <polyline points="22,4 12,14.01 9,11.01"></polyline>
            </svg>
        );

        const XCircle = ({ size = 20, className = "" }) => (
            <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <circle cx="12" cy="12" r="10"></circle>
                <line x1="15" y1="9" x2="9" y2="15"></line>
                <line x1="9" y1="9" x2="15" y2="15"></line>
            </svg>
        );

        const Flag = ({ size = 28, className = "" }) => (
            <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z"></path>
                <line x1="4" y1="22" x2="4" y2="15"></line>
            </svg>
        );

        const Users = ({ size = 20, className = "" }) => (
            <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path>
                <circle cx="9" cy="7" r="4"></circle>
                <path d="M22 21v-2a4 4 0 0 0-3-3.87"></path>
                <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
            </svg>
        );

        const MessageCircle = ({ size = 20, className = "" }) => (
            <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"></path>
            </svg>
        );

        const ItalianBasicApp = () => {
            const [currentTask, setCurrentTask] = useState(null);
            const [userAnswer, setUserAnswer] = useState('');
            const [showResult, setShowResult] = useState(null);
            const [score, setScore] = useState({ correct: 0, total: 0 });
            const [isRecording, setIsRecording] = useState(false);
            const [activeTab, setActiveTab] = useState('tasks');
            const [selectedCategory, setSelectedCategory] = useState('all');

            const vocabulary = {
                questions: {
                    'dove': {
                        definition: '–≥–¥–µ, –∫—É–¥–∞',
                        example: 'Dove abiti?',
                        forms: '–í–æ–ø—Ä–æ—Å –æ –º–µ—Å—Ç–µ',
                        phrases: ['Dove sei?', 'Dove vai?', 'Dove abiti?', 'Dove lavori?']
                    },
                    'quando': {
                        definition: '–∫–æ–≥–¥–∞',
                        example: 'Quando arrivi?',
                        forms: '–í–æ–ø—Ä–æ—Å –æ –≤—Ä–µ–º–µ–Ω–∏',
                        phrases: ['Quando parti?', 'Quando arrivi?', 'Quando lavori?']
                    },
                    'quanto': {
                        definition: '—Å–∫–æ–ª—å–∫–æ',
                        example: 'Quanto costa?',
                        forms: '–í–æ–ø—Ä–æ—Å –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –∏–ª–∏ —Ü–µ–Ω–µ',
                        phrases: ['Quanto costa?', 'Quanti anni hai?', 'Quanto tempo?']
                    },
                    'che': {
                        definition: '—á—Ç–æ, –∫–∞–∫–æ–π',
                        example: 'Che ore sono?',
                        forms: '–í–æ–ø—Ä–æ—Å –æ –ø—Ä–µ–¥–º–µ—Ç–µ –∏–ª–∏ –∫–∞—á–µ—Å—Ç–≤–µ',
                        phrases: ['Che fai?', 'Che ore sono?', 'Che giorno √®?']
                    },
                    'chi': {
                        definition: '–∫—Ç–æ',
                        example: 'Chi sei?',
                        forms: '–í–æ–ø—Ä–æ—Å –æ —á–µ–ª–æ–≤–µ–∫–µ',
                        phrases: ['Chi sei?', 'Chi √®?', 'Chi sono?']
                    },
                    'come': {
                        definition: '–∫–∞–∫',
                        example: 'Come ti chiami?',
                        forms: '–í–æ–ø—Ä–æ—Å –æ —Å–ø–æ—Å–æ–±–µ',
                        phrases: ['Come ti chiami?', 'Come va?', 'Come si dice?']
                    },
                    'di dove': {
                        definition: '–æ—Ç–∫—É–¥–∞ (–æ –ø—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏–∏)',
                        example: 'Di dove sei?',
                        forms: '–í–æ–ø—Ä–æ—Å –æ –ø—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏–∏',
                        phrases: ['Di dove sei?', 'Di dove √®?', 'Di dove siete?']
                    },
                    'a che ora': {
                        definition: '–≤ –∫–æ—Ç–æ—Ä–æ–º —á–∞—Å—É, –≤–æ —Å–∫–æ–ª—å–∫–æ',
                        example: 'A che ora parti?',
                        forms: '–í–æ–ø—Ä–æ—Å –æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏',
                        phrases: ['A che ora arrivi?', 'A che ora lavori?', 'A che ora mangi?']
                    }
                },
                volere: {
                    'voglio': {
                        definition: '—è —Ö–æ—á—É',
                        example: 'Voglio un caff√®',
                        forms: 'io voglio',
                        phrases: ['Voglio mangiare', 'Voglio dormire', 'Voglio un caff√®']
                    },
                    'vuoi': {
                        definition: '—Ç—ã —Ö–æ—á–µ—à—å',
                        example: 'Vuoi un t√®?',
                        forms: 'tu vuoi',
                        phrases: ['Vuoi mangiare?', 'Vuoi venire?', 'Cosa vuoi?']
                    },
                    'vuole': {
                        definition: '–æ–Ω/–æ–Ω–∞ —Ö–æ—á–µ—Ç',
                        example: 'Lei vuole studiare',
                        forms: 'lui/lei vuole',
                        phrases: ['Lui vuole partire', 'Lei vuole restare', 'Vuole un caff√®']
                    },
                    'vogliamo': {
                        definition: '–º—ã —Ö–æ—Ç–∏–º',
                        example: 'Vogliamo mangiare',
                        forms: 'noi vogliamo',
                        phrases: ['Vogliamo andare', 'Vogliamo partire', 'Vogliamo studiare']
                    },
                    'volete': {
                        definition: '–≤—ã —Ö–æ—Ç–∏—Ç–µ',
                        example: 'Volete un gelato?',
                        forms: 'voi volete',
                        phrases: ['Volete mangiare?', 'Volete venire?', 'Cosa volete?']
                    },
                    'vogliono': {
                        definition: '–æ–Ω–∏ —Ö–æ—Ç—è—Ç',
                        example: 'Vogliono partire',
                        forms: 'loro vogliono',
                        phrases: ['Vogliono mangiare', 'Vogliono studiare', 'Vogliono dormire']
                    }
                },
                potere: {
                    'posso': {
                        definition: '—è –º–æ–≥—É',
                        example: 'Posso venire',
                        forms: 'io posso',
                        phrases: ['Posso entrare?', 'Posso mangiare', 'Non posso venire']
                    },
                    'puoi': {
                        definition: '—Ç—ã –º–æ–∂–µ—à—å',
                        example: 'Puoi aiutarmi?',
                        forms: 'tu puoi',
                        phrases: ['Puoi venire?', 'Puoi aiutarmi?', 'Non puoi entrare']
                    },
                    'pu√≤': {
                        definition: '–æ–Ω/–æ–Ω–∞ –º–æ–∂–µ—Ç',
                        example: 'Lei pu√≤ parlare italiano',
                        forms: 'lui/lei pu√≤',
                        phrases: ['Lui pu√≤ venire', 'Lei pu√≤ aiutare', 'Pu√≤ entrare']
                    },
                    'possiamo': {
                        definition: '–º—ã –º–æ–∂–µ–º',
                        example: 'Possiamo andare',
                        forms: 'noi possiamo',
                        phrases: ['Possiamo mangiare', 'Possiamo partire', 'Possiamo studiare']
                    },
                    'potete': {
                        definition: '–≤—ã –º–æ–∂–µ—Ç–µ',
                        example: 'Potete aiutarmi?',
                        forms: 'voi potete',
                        phrases: ['Potete venire?', 'Potete aiutare?', 'Non potete entrare']
                    },
                    'possono': {
                        definition: '–æ–Ω–∏ –º–æ–≥—É—Ç',
                        example: 'Possono venire',
                        forms: 'loro possono',
                        phrases: ['Possono mangiare', 'Possono studiare', 'Possono partire']
                    }
                },
                lavare: {
                    'lavo': {
                        definition: '—è –º–æ—é',
                        example: 'Lavo i piatti',
                        forms: 'io lavo',
                        phrases: ['Lavo i piatti', 'Lavo le mani', 'Lavo la macchina']
                    },
                    'lavare i piatti': {
                        definition: '–º—ã—Ç—å –ø–æ—Å—É–¥—É',
                        example: 'Devo lavare i piatti',
                        forms: 'lavare = –º—ã—Ç—å (–≤–µ—â–∏)',
                        phrases: ['lavare i piatti', 'lavare le mani', 'lavare i denti']
                    }
                },
                lavorare: {
                    'lavoro': {
                        definition: '—è —Ä–∞–±–æ—Ç–∞—é',
                        example: 'Lavoro in ufficio',
                        forms: 'io lavoro',
                        phrases: ['Lavoro in ufficio', 'Lavoro tutti i giorni', 'Lavoro a Milano']
                    },
                    'lavori': {
                        definition: '—Ç—ã —Ä–∞–±–æ—Ç–∞–µ—à—å',
                        example: 'Lavori domani?',
                        forms: 'tu lavori',
                        phrases: ['Dove lavori?', 'Lavori domani?', 'Lavori molto']
                    },
                    'lavora': {
                        definition: '–æ–Ω/–æ–Ω–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç',
                        example: 'Lei lavora in ospedale',
                        forms: 'lui/lei lavora',
                        phrases: ['Lui lavora qui', 'Lei lavora domani', 'Lavora molto']
                    }
                },
                professions: {
                    'insegnante': {
                        definition: '—É—á–∏—Ç–µ–ª—å/—É—á–∏—Ç–µ–ª—å–Ω–∏—Ü–∞',
                        example: 'Sono insegnante',
                        forms: '–û–¥–∏–Ω–∞–∫–æ–≤–∞—è —Ñ–æ—Ä–º–∞ –¥–ª—è –º. –∏ –∂. —Ä–æ–¥–∞',
                        phrases: ['Sono insegnante', 'Lei √® insegnante', 'Insegnante di italiano']
                    },
                    'infermiera': {
                        definition: '–º–µ–¥—Å–µ—Å—Ç—Ä–∞',
                        example: 'Sono infermiera',
                        forms: 'infermiere (–º.—Ä.), infermiera (–∂.—Ä.)',
                        phrases: ['Sono infermiera', 'Lavoro come infermiera', 'Infermiera in ospedale']
                    },
                    'impiegata': {
                        definition: '—Å–ª—É–∂–∞—â–∞—è, –æ—Ñ–∏—Å–Ω–∞—è —Ä–∞–±–æ—Ç–Ω–∏—Ü–∞',
                        example: 'Sono impiegata',
                        forms: 'impiegato (–º.—Ä.), impiegata (–∂.—Ä.)',
                        phrases: ['Sono impiegata', 'Lavoro come impiegata', 'Impiegata in banca']
                    },
                    'medico': {
                        definition: '–≤—Ä–∞—á',
                        example: 'Sono medico',
                        forms: '–û–±—ã—á–Ω–æ –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è –ø–æ —Ä–æ–¥–∞–º',
                        phrases: ['Sono medico', 'Lavoro come medico', 'Medico in ospedale']
                    }
                }
            };

            const sampleTasks = [
                // QUESTION WORDS - —Ç–æ–ª—å–∫–æ —Å —Ä—É—Å—Å–∫–æ–≥–æ –Ω–∞ –∏—Ç–∞–ª—å—è–Ω—Å–∫–∏–π, –ì–û–õ–û–°–û–í–´–ï
                {type:'voice_translate',category:'questions',question:'–ì–¥–µ —Ç—ã –∂–∏–≤–µ—à—å?',answer:'dove abiti',alternatives:['dove abiti','dove vivi'],word:'dove'},
                {type:'voice_translate',category:'questions',question:'–ö–æ–≥–¥–∞ —Ç—ã –ø—Ä–∏–µ–∑–∂–∞–µ—à—å?',answer:'quando arrivi',alternatives:['quando arrivi','quando vieni'],word:'quando'},
                {type:'voice_translate',category:'questions',question:'–°–∫–æ–ª—å–∫–æ —Å—Ç–æ–∏—Ç?',answer:'quanto costa',alternatives:['quanto costa'],word:'quanto'},
                {type:'voice_translate',category:'questions',question:'–ö—Ç–æ —Ç—ã?',answer:'chi sei',alternatives:['chi sei'],word:'chi'},
                {type:'voice_translate',category:'questions',question:'–û—Ç–∫—É–¥–∞ —Ç—ã?',answer:'di dove sei',alternatives:['di dove sei'],word:'di dove'},
                {type:'voice_translate',category:'questions',question:'–í–æ —Å–∫–æ–ª—å–∫–æ —Ç—ã —É–µ–∑–∂–∞–µ—à—å?',answer:'a che ora parti',alternatives:['a che ora parti','a che ora vai'],word:'a che ora'},
                {type:'voice_translate',category:'questions',question:'–ì–¥–µ —Ç—ã —Ä–∞–±–æ—Ç–∞–µ—à—å?',answer:'dove lavori',alternatives:['dove lavori'],word:'dove'},
                {type:'voice_translate',category:'questions',question:'–ö–æ–≥–¥–∞ —Ç—ã —Ä–∞–±–æ—Ç–∞–µ—à—å?',answer:'quando lavori',alternatives:['quando lavori'],word:'quando'},
                {type:'voice_translate',category:'questions',question:'–í–æ —Å–∫–æ–ª—å–∫–æ —Ç—ã —Ä–∞–±–æ—Ç–∞–µ—à—å?',answer:'a che ora lavori',alternatives:['a che ora lavori'],word:'a che ora'},
                {type:'voice_translate',category:'questions',question:'–ß—Ç–æ —Ç—ã –¥–µ–ª–∞–µ—à—å?',answer:'che fai',alternatives:['che fai','cosa fai','che cosa fai'],word:'che'},
                {type:'voice_translate',category:'questions',question:'–ö–æ—Ç–æ—Ä—ã–π —á–∞—Å?',answer:'che ore sono',alternatives:['che ore sono','che ora √®'],word:'che'},
                {type:'voice_translate',category:'questions',question:'–ö–∞–∫ —Ç–µ–±—è –∑–æ–≤—É—Ç?',answer:'come ti chiami',alternatives:['come ti chiami'],word:'come'},
                
                // VOLERE - –≤—Å–µ —Ñ–æ—Ä–º—ã, –ì–û–õ–û–°–û–í–´–ï
                {type:'voice_translate',category:'volere',question:'–Ø —Ö–æ—á—É –∫–æ—Ñ–µ',answer:'voglio un caff√®',alternatives:['voglio un caff√®','voglio il caff√®'],word:'voglio'},
                {type:'voice_translate',category:'volere',question:'–¢—ã —Ö–æ—á–µ—à—å —á–∞–π?',answer:'vuoi un t√®',alternatives:['vuoi un t√®','vuoi il t√®'],word:'vuoi'},
                {type:'voice_translate',category:'volere',question:'–û–Ω–∞ —Ö–æ—á–µ—Ç —É—á–∏—Ç—å—Å—è',answer:'lei vuole studiare',alternatives:['lei vuole studiare','vuole studiare'],word:'vuole'},
                {type:'voice_translate',category:'volere',question:'–ú—ã —Ö–æ—Ç–∏–º —É–µ—Ö–∞—Ç—å',answer:'vogliamo partire',alternatives:['vogliamo partire','noi vogliamo partire'],word:'vogliamo'},
                {type:'voice_translate',category:'volere',question:'–í—ã —Ö–æ—Ç–∏—Ç–µ –ø—Ä–∏–π—Ç–∏?',answer:'volete venire',alternatives:['volete venire','voi volete venire'],word:'volete'},
                {type:'voice_translate',category:'volere',question:'–û–Ω–∏ —Ö–æ—Ç—è—Ç –µ—Å—Ç—å',answer:'vogliono mangiare',alternatives:['vogliono mangiare','loro vogliono mangiare'],word:'vogliono'},
                {type:'voice_translate',category:'volere',question:'–Ø —Ö–æ—á—É —Å–ø–∞—Ç—å',answer:'voglio dormire',alternatives:['voglio dormire'],word:'voglio'},
                {type:'voice_translate',category:'volere',question:'–ß—Ç–æ —Ç—ã —Ö–æ—á–µ—à—å?',answer:'cosa vuoi',alternatives:['cosa vuoi','che cosa vuoi','che vuoi'],word:'vuoi'},
                {type:'voice_translate',category:'volere',question:'–û–Ω —Ö–æ—á–µ—Ç —É–µ—Ö–∞—Ç—å',answer:'lui vuole partire',alternatives:['lui vuole partire','vuole partire'],word:'vuole'},
                {type:'voice_translate',category:'volere',question:'–ú—ã —Ö–æ—Ç–∏–º —É—á–∏—Ç—å—Å—è',answer:'vogliamo studiare',alternatives:['vogliamo studiare','noi vogliamo studiare'],word:'vogliamo'},
                
                // POTERE - –≤—Å–µ —Ñ–æ—Ä–º—ã, –ì–û–õ–û–°–û–í–´–ï
                {type:'voice_translate',category:'potere',question:'–Ø –º–æ–≥—É –ø—Ä–∏–π—Ç–∏',answer:'posso venire',alternatives:['posso venire','io posso venire'],word:'posso'},
                {type:'voice_translate',category:'potere',question:'–¢—ã –º–æ–∂–µ—à—å –ø–æ–º–æ—á—å?',answer:'puoi aiutare',alternatives:['puoi aiutare','puoi aiutarmi'],word:'puoi'},
                {type:'voice_translate',category:'potere',question:'–û–Ω–∞ –º–æ–∂–µ—Ç –≥–æ–≤–æ—Ä–∏—Ç—å –ø–æ-–∏—Ç–∞–ª—å—è–Ω—Å–∫–∏',answer:'lei pu√≤ parlare italiano',alternatives:['lei pu√≤ parlare italiano','pu√≤ parlare italiano'],word:'pu√≤'},
                {type:'voice_translate',category:'potere',question:'–ú—ã –º–æ–∂–µ–º –ø–æ–π—Ç–∏',answer:'possiamo andare',alternatives:['possiamo andare','noi possiamo andare'],word:'possiamo'},
                {type:'voice_translate',category:'potere',question:'–í—ã –º–æ–∂–µ—Ç–µ –ø—Ä–∏–π—Ç–∏?',answer:'potete venire',alternatives:['potete venire','voi potete venire'],word:'potete'},
                {type:'voice_translate',category:'potere',question:'–û–Ω–∏ –º–æ–≥—É—Ç –µ—Å—Ç—å',answer:'possono mangiare',alternatives:['possono mangiare','loro possono mangiare'],word:'possono'},
                {type:'voice_translate',category:'potere',question:'–Ø –º–æ–≥—É –≤–æ–π—Ç–∏?',answer:'posso entrare',alternatives:['posso entrare'],word:'posso'},
                {type:'voice_translate',category:'potere',question:'–û–Ω –º–æ–∂–µ—Ç –ø–æ–º–æ—á—å',answer:'lui pu√≤ aiutare',alternatives:['lui pu√≤ aiutare','pu√≤ aiutare'],word:'pu√≤'},
                {type:'voice_translate',category:'potere',question:'–ú—ã –º–æ–∂–µ–º —É—á–∏—Ç—å—Å—è',answer:'possiamo studiare',alternatives:['possiamo studiare','noi possiamo studiare'],word:'possiamo'},
                {type:'voice_translate',category:'potere',question:'–û–Ω–∏ –º–æ–≥—É—Ç —É–µ—Ö–∞—Ç—å',answer:'possono partire',alternatives:['possono partire','loro possono partire'],word:'possono'},
                
                // LAVARE vs LAVORARE - –∫–ª—é—á–µ–≤–æ–µ —Ä–∞–∑–ª–∏—á–∏–µ, –ì–û–õ–û–°–û–í–´–ï
                {type:'voice_translate',category:'lavare',question:'–Ø –º–æ—é –ø–æ—Å—É–¥—É',answer:'lavo i piatti',alternatives:['lavo i piatti','io lavo i piatti'],word:'lavo'},
                {type:'voice_translate',category:'lavorare',question:'–Ø —Ä–∞–±–æ—Ç–∞—é –≤ –æ—Ñ–∏—Å–µ',answer:'lavoro in ufficio',alternatives:['lavoro in ufficio','io lavoro in ufficio'],word:'lavoro'},
                {type:'voice_translate',category:'lavare',question:'–Ø –¥–æ–ª–∂–µ–Ω –ø–æ–º—ã—Ç—å —Ä—É–∫–∏',answer:'devo lavare le mani',alternatives:['devo lavare le mani','devo lavarmi le mani'],word:'lavare i piatti'},
                {type:'voice_translate',category:'lavorare',question:'–¢—ã —Ä–∞–±–æ—Ç–∞–µ—à—å –∑–∞–≤—Ç—Ä–∞?',answer:'lavori domani',alternatives:['lavori domani','tu lavori domani'],word:'lavori'},
                {type:'voice_translate',category:'lavorare',question:'–û–Ω–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –±–æ–ª—å–Ω–∏—Ü–µ',answer:'lei lavora in ospedale',alternatives:['lei lavora in ospedale','lavora in ospedale'],word:'lavora'},
                {type:'voice_translate',category:'lavare',question:'–Ø –º–æ—é –º–∞—à–∏–Ω—É',answer:'lavo la macchina',alternatives:['lavo la macchina','io lavo la macchina'],word:'lavo'},
                {type:'voice_translate',category:'lavorare',question:'–Ø —Ä–∞–±–æ—Ç–∞—é –∫–∞–∂–¥—ã–π –¥–µ–Ω—å',answer:'lavoro ogni giorno',alternatives:['lavoro ogni giorno','lavoro tutti i giorni'],word:'lavoro'},
                {type:'voice_translate',category:'lavorare',question:'–ì–¥–µ —Ç—ã —Ä–∞–±–æ—Ç–∞–µ—à—å?',answer:'dove lavori',alternatives:['dove lavori'],word:'lavori'},
                
                // –ü–†–û–§–ï–°–°–ò–ò - –∞–∫—Ü–µ–Ω—Ç –Ω–∞ –ø—É—Ç–∞–Ω–∏—Ü—É insegnante/infermiera/impiegata, –ú–ù–û–ì–û –ì–û–õ–û–°–û–í–´–•
                {type:'voice_translate',category:'professions',question:'–Ø —É—á–∏—Ç–µ–ª—å–Ω–∏—Ü–∞',answer:'sono insegnante',alternatives:['sono insegnante','io sono insegnante'],word:'insegnante'},
                {type:'voice_translate',category:'professions',question:'–Ø –º–µ–¥—Å–µ—Å—Ç—Ä–∞',answer:'sono infermiera',alternatives:['sono infermiera','io sono infermiera'],word:'infermiera'},
                {type:'voice_translate',category:'professions',question:'–Ø –æ—Ñ–∏—Å–Ω–∞—è —Ä–∞–±–æ—Ç–Ω–∏—Ü–∞',answer:'sono impiegata',alternatives:['sono impiegata','io sono impiegata'],word:'impiegata'},
                {type:'voice_translate',category:'professions',question:'–û–Ω–∞ —É—á–∏—Ç–µ–ª—å–Ω–∏—Ü–∞ –∏—Ç–∞–ª—å—è–Ω—Å–∫–æ–≥–æ',answer:'lei √® insegnante di italiano',alternatives:['lei √® insegnante di italiano','√® insegnante di italiano'],word:'insegnante'},
                {type:'voice_translate',category:'professions',question:'–û–Ω–∞ –º–µ–¥—Å–µ—Å—Ç—Ä–∞ –≤ –±–æ–ª—å–Ω–∏—Ü–µ',answer:'lei √® infermiera in ospedale',alternatives:['lei √® infermiera in ospedale','√® infermiera in ospedale'],word:'infermiera'},
                {type:'voice_translate',category:'professions',question:'–û–Ω–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ñ–∏—Å–Ω–æ–π —Ä–∞–±–æ—Ç–Ω–∏—Ü–µ–π',answer:'lei lavora come impiegata',alternatives:['lei lavora come impiegata','lavora come impiegata'],word:'impiegata'},
                {type:'voice_translate',category:'professions',question:'–Ø —Ä–∞–±–æ—Ç–∞—é —É—á–∏—Ç–µ–ª—å–Ω–∏—Ü–µ–π',answer:'lavoro come insegnante',alternatives:['lavoro come insegnante','io lavoro come insegnante'],word:'insegnante'},
                {type:'voice_translate',category:'professions',question:'–Ø —Ä–∞–±–æ—Ç–∞—é –º–µ–¥—Å–µ—Å—Ç—Ä–æ–π',answer:'lavoro come infermiera',alternatives:['lavoro come infermiera','io lavoro come infermiera'],word:'infermiera'},
                {type:'voice_translate',category:'professions',question:'–Ø —Ä–∞–±–æ—Ç–∞—é –≤ –±–∞–Ω–∫–µ —Å–ª—É–∂–∞—â–µ–π',answer:'lavoro in banca come impiegata',alternatives:['lavoro in banca come impiegata','sono impiegata in banca'],word:'impiegata'},
                {type:'voice_translate',category:'professions',question:'–Ø –≤—Ä–∞—á',answer:'sono medico',alternatives:['sono medico','io sono medico'],word:'medico'},
                
                // –ú–ù–û–ñ–ï–°–¢–í–ï–ù–ù–´–ï –ó–ê–î–ê–ù–ò–Ø –Ω–∞ –ø—Ä–æ—Ñ–µ—Å—Å–∏–∏
                {type:'multiple_choice',category:'professions',question:'___ (–Ø —É—á–∏—Ç–µ–ª—å–Ω–∏—Ü–∞)',options:['Sono insegnante','Sono infermiera','Sono impiegata','Sono medico'],correct:0,word:'insegnante'},
                {type:'multiple_choice',category:'professions',question:'___ (–Ø –º–µ–¥—Å–µ—Å—Ç—Ä–∞)',options:['Sono infermiera','Sono insegnante','Sono impiegata','Sono medico'],correct:0,word:'infermiera'},
                {type:'multiple_choice',category:'professions',question:'___ (–Ø –æ—Ñ–∏—Å–Ω–∞—è —Ä–∞–±–æ—Ç–Ω–∏—Ü–∞)',options:['Sono impiegata','Sono insegnante','Sono infermiera','Sono medico'],correct:0,word:'impiegata'},
                {type:'multiple_choice',category:'professions',question:'Lei lavora come ___ in ospedale (–º–µ–¥—Å–µ—Å—Ç—Ä–∞)',options:['infermiera','insegnante','impiegata','dottoressa'],correct:0,word:'infermiera'},
                {type:'multiple_choice',category:'professions',question:'Lei √® ___ di italiano (—É—á–∏—Ç–µ–ª—å–Ω–∏—Ü–∞)',options:['insegnante','infermiera','impiegata','professoressa'],correct:0,word:'insegnante'},
                {type:'multiple_choice',category:'professions',question:'Lavoro come ___ in banca (—Å–ª—É–∂–∞—â–∞—è)',options:['impiegata','insegnante','infermiera','manager'],correct:0,word:'impiegata'},
                
                // –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –ì–û–õ–û–°–û–í–´–ï –Ω–∞ –≤—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
                {type:'voice_translate',category:'questions',question:'–°–∫–æ–ª—å–∫–æ —Ç–µ–±–µ –ª–µ—Ç?',answer:'quanti anni hai',alternatives:['quanti anni hai'],word:'quanto'},
                {type:'voice_translate',category:'questions',question:'–ß—Ç–æ —ç—Ç–æ?',answer:'che cosa √®',alternatives:['che cosa √®','che √®','cosa √®'],word:'che'},
                {type:'voice_translate',category:'volere',question:'–û–Ω–∞ —Ö–æ—á–µ—Ç –æ—Å—Ç–∞—Ç—å—Å—è',answer:'lei vuole restare',alternatives:['lei vuole restare','vuole restare'],word:'vuole'},
                {type:'voice_translate',category:'volere',question:'–Ø –Ω–µ —Ö–æ—á—É —É—Ö–æ–¥–∏—Ç—å',answer:'non voglio andare via',alternatives:['non voglio andare via','non voglio partire'],word:'voglio'},
                {type:'voice_translate',category:'potere',question:'–Ø –Ω–µ –º–æ–≥—É –ø—Ä–∏–π—Ç–∏',answer:'non posso venire',alternatives:['non posso venire'],word:'posso'},
                {type:'voice_translate',category:'potere',question:'–¢—ã –Ω–µ –º–æ–∂–µ—à—å –≤–æ–π—Ç–∏',answer:'non puoi entrare',alternatives:['non puoi entrare'],word:'puoi'},
                
                // –°–ú–ï–®–ê–ù–ù–´–ï –ó–ê–î–ê–ù–ò–Ø –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –ø—É—Ç–∞–Ω–∏—Ü—ã
                {type:'voice_translate',category:'all',question:'–Ø –º–æ—é –ø–æ—Å—É–¥—É –∏ –ø–æ—Ç–æ–º —Ä–∞–±–æ—Ç–∞—é',answer:'lavo i piatti e poi lavoro',alternatives:['lavo i piatti e poi lavoro','lavo i piatti e dopo lavoro'],word:'mixed'},
                {type:'voice_translate',category:'all',question:'–Ø —Ö–æ—á—É —Ä–∞–±–æ—Ç–∞—Ç—å –≤ –±–æ–ª—å–Ω–∏—Ü–µ –º–µ–¥—Å–µ—Å—Ç—Ä–æ–π',answer:'voglio lavorare in ospedale come infermiera',alternatives:['voglio lavorare in ospedale come infermiera'],word:'mixed'},
                {type:'voice_translate',category:'all',question:'–ì–¥–µ —Ç—ã —Ö–æ—á–µ—à—å —Ä–∞–±–æ—Ç–∞—Ç—å?',answer:'dove vuoi lavorare',alternatives:['dove vuoi lavorare'],word:'mixed'},
                {type:'voice_translate',category:'all',question:'–Ø –Ω–µ –º–æ–≥—É —Ä–∞–±–æ—Ç–∞—Ç—å –∑–∞–≤—Ç—Ä–∞',answer:'non posso lavorare domani',alternatives:['non posso lavorare domani'],word:'mixed'},
                
                // –¢–ï–ö–°–¢–û–í–´–ï –¥–ª—è —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏—è
                {type:'fill_blanks',category:'questions',question:'___ vai?',answer:'dove',word:'dove'},
                {type:'fill_blanks',category:'questions',question:'___ ti chiami?',answer:'come',word:'come'},
                {type:'fill_blanks',category:'volere',question:'Io ___ un caff√®',answer:'voglio',word:'voglio'},
                {type:'fill_blanks',category:'potere',question:'Io ___ entrare?',answer:'posso',word:'posso'},
                {type:'fill_blanks',category:'lavare',question:'Io ___ i piatti',answer:'lavo',word:'lavo'},
                {type:'fill_blanks',category:'lavorare',question:'Io ___ in ufficio',answer:'lavoro',word:'lavoro'},
                {type:'fill_blanks',category:'professions',question:'Sono ___ (—É—á–∏—Ç–µ–ª—å–Ω–∏—Ü–∞)',answer:'insegnante',word:'insegnante'},
                {type:'fill_blanks',category:'professions',question:'Sono ___ (–º–µ–¥—Å–µ—Å—Ç—Ä–∞)',answer:'infermiera',word:'infermiera'},
                {type:'fill_blanks',category:'professions',question:'Sono ___ (—Å–ª—É–∂–∞—â–∞—è)',answer:'impiegata',word:'impiegata'},
                
                // –ï–©–ï –ë–û–õ–¨–®–ï –ü–†–û–§–ï–°–°–ò–ô - –ø—É—Ç–∞–Ω–∏—Ü–∞
                {type:'voice_translate',category:'professions',question:'–ú–æ—è —Å–µ—Å—Ç—Ä–∞ —É—á–∏—Ç–µ–ª—å–Ω–∏—Ü–∞',answer:'mia sorella √® insegnante',alternatives:['mia sorella √® insegnante'],word:'insegnante'},
                {type:'voice_translate',category:'professions',question:'–ú–æ—è –º–∞–º–∞ –º–µ–¥—Å–µ—Å—Ç—Ä–∞',answer:'mia madre √® infermiera',alternatives:['mia madre √® infermiera','mia mamma √® infermiera'],word:'infermiera'},
                {type:'voice_translate',category:'professions',question:'–ú–æ—è –ø–æ–¥—Ä—É–≥–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –æ—Ñ–∏—Å–µ',answer:'la mia amica lavora in ufficio',alternatives:['la mia amica lavora in ufficio','mia amica lavora in ufficio'],word:'impiegata'},
                {type:'voice_translate',category:'professions',question:'–£—á–∏—Ç–µ–ª—å–Ω–∏—Ü–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —à–∫–æ–ª–µ',answer:'l\'insegnante lavora a scuola',alternatives:['l\'insegnante lavora a scuola','la insegnante lavora a scuola'],word:'insegnante'},
                {type:'voice_translate',category:'professions',question:'–ú–µ–¥—Å–µ—Å—Ç—Ä–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–æ—á—å—é',answer:'l\'infermiera lavora di notte',alternatives:['l\'infermiera lavora di notte','la infermiera lavora di notte'],word:'infermiera'},
                {type:'voice_translate',category:'professions',question:'–°–ª—É–∂–∞—â–∞—è —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –∫–æ–º–ø—å—é—Ç–µ—Ä–æ–º',answer:'l\'impiegata lavora con il computer',alternatives:['l\'impiegata lavora con il computer','la impiegata lavora con il computer'],word:'impiegata'},
                
                // –ï–©–ï –í–û–ü–†–û–°–´
                {type:'voice_translate',category:'questions',question:'–ö—É–¥–∞ —Ç—ã –∏–¥–µ—à—å?',answer:'dove vai',alternatives:['dove vai','dove stai andando'],word:'dove'},
                {type:'voice_translate',category:'questions',question:'–ö–æ–≥–¥–∞ —Ç—ã —É—á–∏—à—å—Å—è?',answer:'quando studi',alternatives:['quando studi'],word:'quando'},
                {type:'voice_translate',category:'questions',question:'–°–∫–æ–ª—å–∫–æ —Å—Ç–æ–∏—Ç –±–∏–ª–µ—Ç?',answer:'quanto costa il biglietto',alternatives:['quanto costa il biglietto','quanto costa un biglietto'],word:'quanto'},
                
                // –ï–©–ï VOLERE
                {type:'voice_translate',category:'volere',question:'–í—ã —Ö–æ—Ç–∏—Ç–µ –≤–æ–¥—ã?',answer:'volete acqua',alternatives:['volete acqua','volete dell\'acqua'],word:'volete'},
                {type:'voice_translate',category:'volere',question:'–û–Ω–∏ —Ö–æ—Ç—è—Ç –æ—Å—Ç–∞—Ç—å—Å—è',answer:'vogliono restare',alternatives:['vogliono restare','loro vogliono restare'],word:'vogliono'},
                
                // –ï–©–ï POTERE
                {type:'voice_translate',category:'potere',question:'–í—ã –º–æ–∂–µ—Ç–µ –ø–æ–º–æ—á—å?',answer:'potete aiutare',alternatives:['potete aiutare','potete aiutarmi'],word:'potete'},
                {type:'voice_translate',category:'potere',question:'–û–Ω–∏ –º–æ–≥—É—Ç –æ—Å—Ç–∞—Ç—å—Å—è',answer:'possono restare',alternatives:['possono restare','loro possono restare'],word:'possono'},
                
                // –ï–©–ï LAVORARE
                {type:'voice_translate',category:'lavorare',question:'–û–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –ú–∏–ª–∞–Ω–µ',answer:'lui lavora a milano',alternatives:['lui lavora a milano','lavora a milano'],word:'lavora'},
                {type:'voice_translate',category:'lavorare',question:'–Ø —Ä–∞–±–æ—Ç–∞—é –¥–æ–º–∞',answer:'lavoro a casa',alternatives:['lavoro a casa','io lavoro a casa'],word:'lavoro'},
                {type:'voice_translate',category:'lavorare',question:'–¢—ã –º–Ω–æ–≥–æ —Ä–∞–±–æ—Ç–∞–µ—à—å',answer:'lavori molto',alternatives:['lavori molto','tu lavori molto'],word:'lavori'}
            ];

            const generateRandomTask = () => {
                const filteredTasks = selectedCategory === 'all' 
                    ? sampleTasks 
                    : sampleTasks.filter(task => task.category === selectedCategory);
                
                const randomTask = filteredTasks[Math.floor(Math.random() * filteredTasks.length)];
                setCurrentTask({...randomTask, id: Date.now()});
                setUserAnswer('');
                setShowResult(null);
            };

            const normalizeText = (text) => {
                return text.toLowerCase()
                    .replace(/[.,!?;:'"]/g, '')
                    .replace(/\s+/g, ' ')
                    .trim();
            };

            const checkAnswer = () => {
                if (!currentTask) return;
                
                let isCorrect = false;
                
                switch(currentTask.type) {
                    case 'multiple_choice':
                        isCorrect = parseInt(userAnswer) === currentTask.correct;
                        break;
                    case 'fill_blanks':
                    case 'voice_translate':
                        const normalizedAnswer = normalizeText(userAnswer);
                        const normalizedCorrect = normalizeText(currentTask.answer);
                        
                        if (currentTask.alternatives) {
                            isCorrect = currentTask.alternatives.some(alt => 
                                normalizeText(alt) === normalizedAnswer
                            );
                        } else {
                            isCorrect = normalizedAnswer === normalizedCorrect;
                        }
                        break;
                    default:
                        isCorrect = true;
                }
                
                setScore(prev => ({
                    correct: prev.correct + (isCorrect ? 1 : 0),
                    total: prev.total + 1
                }));
                
                setShowResult(isCorrect);
            };

            const speakText = (text) => {
                if ('speechSynthesis' in window) {
                    window.speechSynthesis.cancel();
                    
                    const utterance = new SpeechSynthesisUtterance(text);
                    utterance.lang = 'it-IT';
                    utterance.rate = 0.75;
                    utterance.pitch = 1.0;
                    utterance.volume = 1.0;
                    
                    const setVoice = () => {
                        const voices = window.speechSynthesis.getVoices();
                        const preferredVoices = [
                            voices.find(voice => voice.name.toLowerCase().includes('google') && voice.lang.startsWith('it')),
                            voices.find(voice => voice.name.toLowerCase().includes('microsoft') && voice.lang.startsWith('it')),
                            voices.find(voice => voice.lang === 'it-IT'),
                            voices.find(voice => voice.lang.startsWith('it'))
                        ];
                        
                        const selectedVoice = preferredVoices.find(voice => voice !== undefined);
                        if (selectedVoice) utterance.voice = selectedVoice;
                        
                        try {
                            window.speechSynthesis.speak(utterance);
                        } catch (error) {
                            console.error('Speech error:', error);
                        }
                    };
                    
                    if (window.speechSynthesis.getVoices().length > 0) {
                        setVoice();
                    } else {
                        window.speechSynthesis.onvoiceschanged = () => {
                            setVoice();
                            window.speechSynthesis.onvoiceschanged = null;
                        };
                        setTimeout(() => {
                            if (window.speechSynthesis.getVoices().length === 0) {
                                window.speechSynthesis.speak(utterance);
                            }
                        }, 1000);
                    }
                }
            };

            const startRecording = async () => {
                if (!('webkitSpeechRecognition' in window) && !('SpeechRecognition' in window)) {
                    alert('–í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–µ—á–∏. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ Chrome –∏–ª–∏ Edge.');
                    return;
                }

                try {
                    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                    const recognition = new SpeechRecognition();
                    
                    recognition.lang = 'it-IT';
                    recognition.continuous = false;
                    recognition.interimResults = false;
                    
                    recognition.onstart = () => {
                        setIsRecording(true);
                        setUserAnswer('Parla...');
                    };
                    
                    recognition.onresult = (event) => {
                        const transcript = event.results[0][0].transcript.trim();
                        setUserAnswer(transcript);
                        setIsRecording(false);
                    };
                    
                    recognition.onerror = (event) => {
                        setIsRecording(false);
                        setUserAnswer('Errore: ' + event.error);
                    };
                    
                    recognition.onend = () => {
                        setIsRecording(false);
                    };
                    
                    recognition.start();
                    
                } catch (error) {
                    setIsRecording(false);
                    setUserAnswer('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–ø—É—Å—Ç–∏—Ç—å —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–µ—á–∏');
                }
            };

            const stopRecording = () => {
                setIsRecording(false);
            };

            useEffect(() => {
                generateRandomTask();
            }, [selectedCategory]);

            const renderTask = () => {
                if (!currentTask) return null;

                switch(currentTask.type) {
                    case 'voice_translate':
                        return (
                            <div className="space-y-4">
                                <div className="bg-blue-50 p-6 rounded-lg border-2 border-blue-200">
                                    <p className="text-2xl font-bold text-center text-blue-900">{currentTask.question}</p>
                                </div>
                                <div className="text-center">
                                    <button
                                        onClick={isRecording ? stopRecording : startRecording}
                                        className={`inline-flex items-center gap-3 px-8 py-4 rounded-full text-lg font-semibold ${
                                            isRecording 
                                                ? 'bg-red-500 hover:bg-red-600 animate-pulse' 
                                                : 'bg-green-600 hover:bg-green-700'
                                        } text-white shadow-lg`}
                                    >
                                        {isRecording ? <MicOff size={24} /> : <Mic size={24} />}
                                        {isRecording ? '–ì–æ–≤–æ—Ä–∏—Ç–µ...' : '–ù–∞–∂–º–∏—Ç–µ –∏ –≥–æ–≤–æ—Ä–∏—Ç–µ'}
                                    </button>
                                </div>
                                {userAnswer && userAnswer !== 'Parla...' && (
                                    <div className="bg-gray-50 p-4 rounded-lg">
                                        <p className="text-sm text-gray-600">–†–∞—Å–ø–æ–∑–Ω–∞–Ω–æ:</p>
                                        <p className="text-lg font-medium">{userAnswer}</p>
                                    </div>
                                )}
                            </div>
                        );
                    
                    case 'multiple_choice':
                        return (
                            <div className="space-y-4">
                                <div className="bg-blue-50 p-4 rounded-lg">
                                    <p className="text-xl font-medium">{currentTask.question}</p>
                                </div>
                                <div className="grid grid-cols-1 gap-3">
                                    {currentTask.options.map((option, index) => (
                                        <button
                                            key={index}
                                            onClick={() => setUserAnswer(index.toString())}
                                            className={`p-4 border-2 rounded-lg text-left transition-all ${
                                                userAnswer === index.toString()
                                                    ? 'bg-green-600 text-white border-green-600 font-semibold'
                                                    : 'bg-white hover:bg-green-50 border-gray-300'
                                            }`}
                                        >
                                            {option}
                                        </button>
                                    ))}
                                </div>
                            </div>
                        );
                    
                    case 'fill_blanks':
                        return (
                            <div className="space-y-4">
                                <div className="bg-blue-50 p-4 rounded-lg">
                                    <p className="text-xl font-medium">{currentTask.question}</p>
                                </div>
                                <div className="flex gap-2">
                                    <input
                                        type="text"
                                        value={userAnswer}
                                        onChange={(e) => setUserAnswer(e.target.value)}
                                        placeholder="Scrivi qui..."
                                        className="flex-1 p-4 border-2 border-gray-300 rounded-lg text-lg"
                                        onKeyPress={(e) => e.key === 'Enter' && checkAnswer()}
                                    />
                                    <button
                                        onClick={isRecording ? stopRecording : startRecording}
                                        className={`px-4 py-2 rounded-lg ${
                                            isRecording 
                                                ? 'bg-red-500 hover:bg-red-600' 
                                                : 'bg-green-600 hover:bg-green-700'
                                        } text-white`}
                                    >
                                        {isRecording ? <MicOff size={20} /> : <Mic size={20} />}
                                    </button>
                                </div>
                            </div>
                        );
                    
                    default:
                        return null;
                }
            };

            const renderVocabulary = () => (
                <div className="space-y-6">
                    {Object.entries(vocabulary).map(([category, words]) => (
                        <div key={category} className="bg-white rounded-lg p-6 shadow-sm border">
                            <h3 className="text-xl font-semibold mb-4 text-green-700">
                                {category === 'questions' ? '‚ùì –í–æ–ø—Ä–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ —Å–ª–æ–≤–∞' :
                                 category === 'volere' ? 'üíö Volere (—Ö–æ—Ç–µ—Ç—å)' : 
                                 category === 'potere' ? 'üí™ Potere (–º–æ—á—å)' :
                                 category === 'lavare' ? 'üßº Lavare (–º—ã—Ç—å)' :
                                 category === 'lavorare' ? 'üíº Lavorare (—Ä–∞–±–æ—Ç–∞—Ç—å)' : 'üë®‚Äç‚öïÔ∏è –ü—Ä–æ—Ñ–µ—Å—Å–∏–∏'}
                            </h3>
                            <div className="grid gap-4">
                                {Object.entries(words).map(([word, info]) => (
                                    <div key={word} className="border-l-4 border-green-200 pl-4">
                                        <div className="flex items-center justify-between">
                                            <h4 className="font-semibold text-lg">{word}</h4>
                                            <button
                                                onClick={() => speakText(word)}
                                                className="text-green-600 hover:text-green-800"
                                            >
                                                <Volume2 size={20} />
                                            </button>
                                        </div>
                                        <p className="text-gray-600">{info.definition}</p>
                                        <div className="flex items-center gap-2 mt-2">
                                            <p className="text-blue-700 flex-1">{info.example}</p>
                                            <button
                                                onClick={() => speakText(info.example)}
                                                className="text-blue-600 hover:text-blue-800"
                                            >
                                                <Volume2 size={16} />
                                            </button>
                                        </div>
                                        <div className="mt-2">
                                            <p className="text-sm text-gray-500 mb-2">{info.forms}</p>
                                            {info.phrases && (
                                                <div className="space-y-1">
                                                    {info.phrases.map((phrase, index) => (
                                                        <div key={index} className="flex items-center gap-2">
                                                            <span className="text-sm text-green-600">‚Ä¢ {phrase}</span>
                                                            <button
                                                                onClick={() => speakText(phrase)}
                                                                className="text-green-600 hover:text-green-800"
                                                            >
                                                                <Volume2 size={14} />
                                                            </button>
                                                        </div>
                                                    ))}
                                                </div>
                                            )}
                                        </div>
                                    </div>
                                ))}
                            </div>
                        </div>
                    ))}
                </div>
            );

            return (
                <div className="max-w-4xl mx-auto bg-gradient-to-b from-green-50 to-red-50 min-h-screen">
                    <div className="bg-gradient-to-r from-green-600 to-red-600 text-white p-6">
                        <h1 className="text-2xl font-bold flex items-center gap-2">
                            <Flag size={28} />
                            Italiano A0-A1 üáÆüáπ
                        </h1>
                        <p className="mt-2 opacity-90">
                            –í–æ–ø—Ä–æ—Å—ã ‚Ä¢ Volere & Potere ‚Ä¢ Lavare vs Lavorare ‚Ä¢ Professioni
                        </p>
                        <div className="mt-4 flex gap-4 text-sm">
                            <span>‚úÖ {score.correct}</span>
                            <span>üìä {score.total}</span>
                            <span>üéØ {score.total > 0 ? Math.round((score.correct / score.total) * 100) : 0}%</span>
                        </div>
                    </div>

                    <div className="flex border-b bg-white">
                        <button
                            onClick={() => setActiveTab('tasks')}
                            className={`flex-1 p-4 text-center font-medium ${
                                activeTab === 'tasks' 
                                    ? 'border-b-2 border-green-600 text-green-700' 
                                    : 'text-gray-600 hover:text-gray-800'
                            }`}
                        >
                            <MessageCircle className="mx-auto mb-1" size={20} />
                            –£–ø—Ä–∞–∂–Ω–µ–Ω–∏—è
                        </button>
                        <button
                            onClick={() => setActiveTab('vocabulary')}
                            className={`flex-1 p-4 text-center font-medium ${
                                activeTab === 'vocabulary' 
                                    ? 'border-b-2 border-green-600 text-green-700' 
                                    : 'text-gray-600 hover:text-gray-800'
                            }`}
                        >
                            <Users className="mx-auto mb-1" size={20} />
                            –°–ª–æ–≤–∞—Ä—å
                        </button>
                    </div>

                    <div className="p-6">
                        {activeTab === 'tasks' && (
                            <div className="space-y-6">
                                <div className="flex gap-2 flex-wrap">
                                    <button onClick={() => setSelectedCategory('all')} className={`px-4 py-2 rounded-lg ${selectedCategory === 'all' ? 'bg-green-600 text-white' : 'bg-white border hover:bg-green-50'}`}>–í—Å–µ</button>
                                    <button onClick={() => setSelectedCategory('questions')} className={`px-4 py-2 rounded-lg ${selectedCategory === 'questions' ? 'bg-green-600 text-white' : 'bg-white border hover:bg-green-50'}`}>‚ùì –í–æ–ø—Ä–æ—Å—ã</button>
                                    <button onClick={() => setSelectedCategory('volere')} className={`px-4 py-2 rounded-lg ${selectedCategory === 'volere' ? 'bg-green-600 text-white' : 'bg-white border hover:bg-green-50'}`}>üíö Volere</button>
                                    <button onClick={() => setSelectedCategory('potere')} className={`px-4 py-2 rounded-lg ${selectedCategory === 'potere' ? 'bg-green-600 text-white' : 'bg-white border hover:bg-green-50'}`}>üí™ Potere</button>
                                    <button onClick={() => setSelectedCategory('lavare')} className={`px-4 py-2 rounded-lg ${selectedCategory === 'lavare' ? 'bg-green-600 text-white' : 'bg-white border hover:bg-green-50'}`}>üßº Lavare</button>
                                    <button onClick={() => setSelectedCategory('lavorare')} className={`px-4 py-2 rounded-lg ${selectedCategory === 'lavorare' ? 'bg-green-600 text-white' : 'bg-white border hover:bg-green-50'}`}>üíº Lavorare</button>
                                    <button onClick={() => setSelectedCategory('professions')} className={`px-4 py-2 rounded-lg ${selectedCategory === 'professions' ? 'bg-green-600 text-white' : 'bg-white border hover:bg-green-50'}`}>üë®‚Äç‚öïÔ∏è –ü—Ä–æ—Ñ–µ—Å—Å–∏–∏</button>
                                </div>

                                <div className="bg-white rounded-lg p-6 shadow-sm border">
                                    {showResult !== null && (
                                        <div className={`mb-4 p-4 rounded-lg flex items-center gap-2 ${showResult ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}`}>
                                            {showResult ? <CheckCircle size={20} /> : <XCircle size={20} />}
                                            {showResult ? '–ü—Ä–∞–≤–∏–ª—å–Ω–æ! üéâ' : `–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ. –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç: ${currentTask?.answer || currentTask?.options?.[currentTask?.correct]}`}
                                        </div>
                                    )}
                                    
                                    {renderTask()}
                                    
                                    {currentTask && (
                                        <div className="mt-6 flex gap-3">
                                            {showResult === null ? (
                                                <button 
                                                    onClick={checkAnswer} 
                                                    disabled={!userAnswer.trim() || userAnswer === 'Parla...'} 
                                                    className="bg-blue-500 text-white px-6 py-3 rounded-lg hover:bg-blue-600 disabled:bg-gray-400 disabled:cursor-not-allowed font-semibold"
                                                >
                                                    –ü—Ä–æ–≤–µ—Ä–∏—Ç—å
                                                </button>
                                            ) : (
                                                <button 
                                                    onClick={generateRandomTask} 
                                                    className="bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 flex items-center gap-2 font-semibold"
                                                >
                                                    <RotateCcw size={16} />
                                                    –°–ª–µ–¥—É—é—â–µ–µ
                                                </button>
                                            )}
                                            <button 
                                                onClick={generateRandomTask} 
                                                className="bg-gray-500 text-white px-6 py-3 rounded-lg hover:bg-gray-600 flex items-center gap-2"
                                            >
                                                <RotateCcw size={16} />
                                                –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å
                                            </button>
                                        </div>
                                    )}
                                </div>
                            </div>
                        )}

                        {activeTab === 'vocabulary' && renderVocabulary()}
                    </div>
                </div>
            );
        };

        ReactDOM.render(React.createElement(ItalianBasicApp), document.getElementById('root'));
    </script>
</body>
</html>
