<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ò—Ç–∞–ª—å—è–Ω—Å–∫–∏–π A0-A1</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
        }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        const Mic = ({ size = 20, className = "" }) => (
            <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z"></path>
                <path d="M19 10v2a7 7 0 0 1-14 0v-2"></path>
                <line x1="12" y1="19" x2="12" y2="23"></line>
                <line x1="8" y1="23" x2="16" y2="23"></line>
            </svg>
        );

        const MicOff = ({ size = 20, className = "" }) => (
            <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <line x1="2" y1="2" x2="22" y2="22"></line>
                <path d="M18.89 13.23A7.12 7.12 0 0 0 19 12v-2"></path>
                <path d="M5 10v2a7 7 0 0 0 12 5"></path>
                <path d="M15 9.34V5a3 3 0 0 0-5.68-1.33"></path>
                <path d="M9 9v3a3 3 0 0 0 5.12 2.12"></path>
                <line x1="12" y1="19" x2="12" y2="23"></line>
                <line x1="8" y1="23" x2="16" y2="23"></line>
            </svg>
        );

        const Volume2 = ({ size = 20, className = "" }) => (
            <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>
                <path d="M15.54 8.46a5 5 0 0 1 0 7.07"></path>
                <path d="M19.07 4.93a10 10 0 0 1 0 14.14"></path>
            </svg>
        );

        const RotateCcw = ({ size = 16, className = "" }) => (
            <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"></path>
                <path d="M3 3v5h5"></path>
            </svg>
        );

        const CheckCircle = ({ size = 20, className = "" }) => (
            <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                <polyline points="22,4 12,14.01 9,11.01"></polyline>
            </svg>
        );

        const XCircle = ({ size = 20, className = "" }) => (
            <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <circle cx="12" cy="12" r="10"></circle>
                <line x1="15" y1="9" x2="9" y2="15"></line>
                <line x1="9" y1="9" x2="15" y2="15"></line>
            </svg>
        );

        const Flag = ({ size = 28, className = "" }) => (
            <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z"></path>
                <line x1="4" y1="22" x2="4" y2="15"></line>
            </svg>
        );

        const Users = ({ size = 20, className = "" }) => (
            <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path>
                <circle cx="9" cy="7" r="4"></circle>
                <path d="M22 21v-2a4 4 0 0 0-3-3.87"></path>
                <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
            </svg>
        );

        const MessageCircle = ({ size = 20, className = "" }) => (
            <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"></path>
            </svg>
        );

        const ItalianBasicApp = () => {
            const [currentTask, setCurrentTask] = useState(null);
            const [userAnswer, setUserAnswer] = useState('');
            const [showResult, setShowResult] = useState(null);
            const [score, setScore] = useState({ correct: 0, total: 0 });
            const [isRecording, setIsRecording] = useState(false);
            const [activeTab, setActiveTab] = useState('tasks');
            const [selectedCategory, setSelectedCategory] = useState('all');

            const vocabulary = {
                questions: {
                    'dove': {
                        definition: '–≥–¥–µ, –∫—É–¥–∞',
                        example: 'Dove abiti? (–ì–¥–µ —Ç—ã –∂–∏–≤–µ—à—å?)',
                        forms: '–í–æ–ø—Ä–æ—Å –æ –º–µ—Å—Ç–µ',
                        phrases: ['Dove sei?', 'Dove vai?', 'Dove abiti?']
                    },
                    'quando': {
                        definition: '–∫–æ–≥–¥–∞',
                        example: 'Quando arrivi? (–ö–æ–≥–¥–∞ —Ç—ã –ø—Ä–∏–µ–¥–µ—à—å?)',
                        forms: '–í–æ–ø—Ä–æ—Å –æ –≤—Ä–µ–º–µ–Ω–∏',
                        phrases: ['Quando parti?', 'Quando arrivi?', 'Quando mangi?']
                    },
                    'quanto': {
                        definition: '—Å–∫–æ–ª—å–∫–æ',
                        example: 'Quanto costa? (–°–∫–æ–ª—å–∫–æ —Å—Ç–æ–∏—Ç?)',
                        forms: '–í–æ–ø—Ä–æ—Å –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –∏–ª–∏ —Ü–µ–Ω–µ',
                        phrases: ['Quanto costa?', 'Quanti anni hai?', 'Quanto tempo?']
                    },
                    'che': {
                        definition: '—á—Ç–æ, –∫–∞–∫–æ–π',
                        example: 'Che ore sono? (–ö–æ—Ç–æ—Ä—ã–π —á–∞—Å?)',
                        forms: '–í–æ–ø—Ä–æ—Å –æ –ø—Ä–µ–¥–º–µ—Ç–µ –∏–ª–∏ –∫–∞—á–µ—Å—Ç–≤–µ',
                        phrases: ['Che fai?', 'Che ore sono?', 'Che giorno √®?']
                    },
                    'chi': {
                        definition: '–∫—Ç–æ',
                        example: 'Chi sei? (–ö—Ç–æ —Ç—ã?)',
                        forms: '–í–æ–ø—Ä–æ—Å –æ —á–µ–ª–æ–≤–µ–∫–µ',
                        phrases: ['Chi sei?', 'Chi √®?', 'Chi sono?']
                    },
                    'che cosa': {
                        definition: '—á—Ç–æ (–ø–æ–ª–Ω–∞—è —Ñ–æ—Ä–º–∞)',
                        example: 'Che cosa fai? (–ß—Ç–æ —Ç—ã –¥–µ–ª–∞–µ—à—å?)',
                        forms: '–°–∏–Ω–æ–Ω–∏–º—ã: che cosa = cosa = che',
                        phrases: ['Che cosa mangi?', 'Che cosa vuoi?', 'Che cosa studi?']
                    },
                    'come': {
                        definition: '–∫–∞–∫',
                        example: 'Come stai? (–ö–∞–∫ –¥–µ–ª–∞?)',
                        forms: '–í–æ–ø—Ä–æ—Å –æ —Å–ø–æ—Å–æ–±–µ –∏–ª–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–∏',
                        phrases: ['Come stai?', 'Come ti chiami?', 'Come va?']
                    },
                    'di dove': {
                        definition: '–æ—Ç–∫—É–¥–∞ (–æ –ø—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏–∏)',
                        example: 'Di dove sei? (–û—Ç–∫—É–¥–∞ —Ç—ã?)',
                        forms: '–í–æ–ø—Ä–æ—Å –æ –ø—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏–∏, —Ä–æ–¥–∏–Ω–µ',
                        phrases: ['Di dove sei?', 'Di dove √®?', 'Di dove siete?']
                    },
                    'a che ora': {
                        definition: '–≤ –∫–æ—Ç–æ—Ä–æ–º —á–∞—Å—É, –≤–æ —Å–∫–æ–ª—å–∫–æ',
                        example: 'A che ora parti? (–í–æ —Å–∫–æ–ª—å–∫–æ —Ç—ã —É–µ–∑–∂–∞–µ—à—å?)',
                        forms: '–í–æ–ø—Ä–æ—Å –æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏',
                        phrases: ['A che ora arrivi?', 'A che ora mangi?', 'A che ora lavori?']
                    }
                },
                volere: {
                    'volere (io voglio)': {
                        definition: '—Ö–æ—Ç–µ—Ç—å (—è —Ö–æ—á—É)',
                        example: 'Io voglio un caff√® (–Ø —Ö–æ—á—É –∫–æ—Ñ–µ)',
                        forms: '–°–ø—Ä—è–∂–µ–Ω–∏–µ: voglio, vuoi, vuole, vogliamo, volete, vogliono',
                        phrases: ['Voglio mangiare', 'Voglio dormire', 'Voglio un caff√®']
                    },
                    'volere (tu vuoi)': {
                        definition: '—Ö–æ—Ç–µ—Ç—å (—Ç—ã —Ö–æ—á–µ—à—å)',
                        example: 'Tu vuoi un t√®? (–¢—ã —Ö–æ—á–µ—à—å —á–∞–π?)',
                        forms: '–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≥–ª–∞–≥–æ–ª',
                        phrases: ['Vuoi mangiare?', 'Vuoi venire?', 'Cosa vuoi?']
                    },
                    'volere (lui/lei vuole)': {
                        definition: '—Ö–æ—Ç–µ—Ç—å (–æ–Ω/–æ–Ω–∞ —Ö–æ—á–µ—Ç)',
                        example: 'Lei vuole studiare (–û–Ω–∞ —Ö–æ—á–µ—Ç —É—á–∏—Ç—å—Å—è)',
                        forms: '3 –ª–∏—Ü–æ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ —á–∏—Å–ª–æ',
                        phrases: ['Lui vuole partire', 'Lei vuole restare', 'Vuole un caff√®']
                    },
                    'volere (noi vogliamo)': {
                        definition: '—Ö–æ—Ç–µ—Ç—å (–º—ã —Ö–æ—Ç–∏–º)',
                        example: 'Noi vogliamo mangiare (–ú—ã —Ö–æ—Ç–∏–º –µ—Å—Ç—å)',
                        forms: '1 –ª–∏—Ü–æ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ —á–∏—Å–ª–æ',
                        phrases: ['Vogliamo andare', 'Vogliamo partire', 'Vogliamo studiare']
                    },
                    'volere (voi volete)': {
                        definition: '—Ö–æ—Ç–µ—Ç—å (–≤—ã —Ö–æ—Ç–∏—Ç–µ)',
                        example: 'Voi volete un gelato? (–í—ã —Ö–æ—Ç–∏—Ç–µ –º–æ—Ä–æ–∂–µ–Ω–æ–µ?)',
                        forms: '2 –ª–∏—Ü–æ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ —á–∏—Å–ª–æ',
                        phrases: ['Volete mangiare?', 'Volete venire?', 'Cosa volete?']
                    },
                    'volere (loro vogliono)': {
                        definition: '—Ö–æ—Ç–µ—Ç—å (–æ–Ω–∏ —Ö–æ—Ç—è—Ç)',
                        example: 'Loro vogliono partire (–û–Ω–∏ —Ö–æ—Ç—è—Ç —É–µ—Ö–∞—Ç—å)',
                        forms: '3 –ª–∏—Ü–æ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ —á–∏—Å–ª–æ',
                        phrases: ['Vogliono mangiare', 'Vogliono studiare', 'Vogliono dormire']
                    }
                },
                potere: {
                    'potere (io posso)': {
                        definition: '–º–æ—á—å (—è –º–æ–≥—É)',
                        example: 'Io posso venire (–Ø –º–æ–≥—É –ø—Ä–∏–π—Ç–∏)',
                        forms: '–°–ø—Ä—è–∂–µ–Ω–∏–µ: posso, puoi, pu√≤, possiamo, potete, possono',
                        phrases: ['Posso entrare?', 'Posso mangiare', 'Non posso venire']
                    },
                    'potere (tu puoi)': {
                        definition: '–º–æ—á—å (—Ç—ã –º–æ–∂–µ—à—å)',
                        example: 'Tu puoi aiutarmi? (–¢—ã –º–æ–∂–µ—à—å –º–Ω–µ –ø–æ–º–æ—á—å?)',
                        forms: '–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≥–ª–∞–≥–æ–ª',
                        phrases: ['Puoi venire?', 'Puoi aiutarmi?', 'Non puoi entrare']
                    },
                    'potere (lui/lei pu√≤)': {
                        definition: '–º–æ—á—å (–æ–Ω/–æ–Ω–∞ –º–æ–∂–µ—Ç)',
                        example: 'Lei pu√≤ parlare italiano (–û–Ω–∞ –º–æ–∂–µ—Ç –≥–æ–≤–æ—Ä–∏—Ç—å –ø–æ-–∏—Ç–∞–ª—å—è–Ω—Å–∫–∏)',
                        forms: '3 –ª–∏—Ü–æ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ —á–∏—Å–ª–æ (—Å —É–¥–∞—Ä–µ–Ω–∏–µ–º)',
                        phrases: ['Lui pu√≤ venire', 'Lei pu√≤ aiutare', 'Pu√≤ entrare']
                    },
                    'potere (noi possiamo)': {
                        definition: '–º–æ—á—å (–º—ã –º–æ–∂–µ–º)',
                        example: 'Noi possiamo andare (–ú—ã –º–æ–∂–µ–º –ø–æ–π—Ç–∏)',
                        forms: '1 –ª–∏—Ü–æ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ —á–∏—Å–ª–æ',
                        phrases: ['Possiamo mangiare', 'Possiamo partire', 'Possiamo studiare']
                    },
                    'potere (voi potete)': {
                        definition: '–º–æ—á—å (–≤—ã –º–æ–∂–µ—Ç–µ)',
                        example: 'Voi potete aiutarmi? (–í—ã –º–æ–∂–µ—Ç–µ –º–Ω–µ –ø–æ–º–æ—á—å?)',
                        forms: '2 –ª–∏—Ü–æ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ —á–∏—Å–ª–æ',
                        phrases: ['Potete venire?', 'Potete aiutare?', 'Non potete entrare']
                    },
                    'potere (loro possono)': {
                        definition: '–º–æ—á—å (–æ–Ω–∏ –º–æ–≥—É—Ç)',
                        example: 'Loro possono venire (–û–Ω–∏ –º–æ–≥—É—Ç –ø—Ä–∏–π—Ç–∏)',
                        forms: '3 –ª–∏—Ü–æ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ —á–∏—Å–ª–æ',
                        phrases: ['Possono mangiare', 'Possono studiare', 'Possono partire']
                    }
                },
                lavare: {
                    'lavare (io lavo)': {
                        definition: '–º—ã—Ç—å (—è –º–æ—é)',
                        example: 'Io lavo i piatti (–Ø –º–æ—é –ø–æ—Å—É–¥—É)',
                        forms: '–°–ø—Ä—è–∂–µ–Ω–∏–µ: lavo, lavi, lava, laviamo, lavate, lavano',
                        phrases: ['Lavo i piatti', 'Lavo le mani', 'Lavo la macchina']
                    },
                    'lavare i piatti': {
                        definition: '–º—ã—Ç—å –ø–æ—Å—É–¥—É',
                        example: 'Devo lavare i piatti (–Ø –¥–æ–ª–∂–µ–Ω –ø–æ–º—ã—Ç—å –ø–æ—Å—É–¥—É)',
                        forms: 'lavare = –º—ã—Ç—å (–≤–µ—â–∏, –ø—Ä–µ–¥–º–µ—Ç—ã)',
                        phrases: ['lavare i piatti', 'lavare le mani', 'lavare i denti']
                    }
                },
                lavorare: {
                    'lavorare (io lavoro)': {
                        definition: '—Ä–∞–±–æ—Ç–∞—Ç—å (—è —Ä–∞–±–æ—Ç–∞—é)',
                        example: 'Io lavoro in ufficio (–Ø —Ä–∞–±–æ—Ç–∞—é –≤ –æ—Ñ–∏—Å–µ)',
                        forms: '–°–ø—Ä—è–∂–µ–Ω–∏–µ: lavoro, lavori, lavora, lavoriamo, lavorate, lavorano',
                        phrases: ['Lavoro in ufficio', 'Lavoro tutti i giorni', 'Lavoro a Milano']
                    },
                    'lavorare (tu lavori)': {
                        definition: '—Ä–∞–±–æ—Ç–∞—Ç—å (—Ç—ã —Ä–∞–±–æ—Ç–∞–µ—à—å)',
                        example: 'Tu lavori domani? (–¢—ã —Ä–∞–±–æ—Ç–∞–µ—à—å –∑–∞–≤—Ç—Ä–∞?)',
                        forms: 'lavorare = —Ä–∞–±–æ—Ç–∞—Ç—å (–ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ)',
                        phrases: ['Dove lavori?', 'Lavori domani?', 'Lavori molto']
                    },
                    'lavorare (lui/lei lavora)': {
                        definition: '—Ä–∞–±–æ—Ç–∞—Ç—å (–æ–Ω/–æ–Ω–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç)',
                        example: 'Lei lavora in ospedale (–û–Ω–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –±–æ–ª—å–Ω–∏—Ü–µ)',
                        forms: '3 –ª–∏—Ü–æ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ —á–∏—Å–ª–æ',
                        phrases: ['Lui lavora qui', 'Lei lavora domani', 'Lavora molto']
                    }
                },
                professions: {
                    'insegnante': {
                        definition: '—É—á–∏—Ç–µ–ª—å/—É—á–∏—Ç–µ–ª—å–Ω–∏—Ü–∞',
                        example: 'Sono insegnante (–Ø —É—á–∏—Ç–µ–ª—å/—É—á–∏—Ç–µ–ª—å–Ω–∏—Ü–∞)',
                        forms: '–û–¥–∏–Ω–∞–∫–æ–≤–∞—è —Ñ–æ—Ä–º–∞ –¥–ª—è –º—É–∂—Å–∫–æ–≥–æ –∏ –∂–µ–Ω—Å–∫–æ–≥–æ —Ä–æ–¥–∞',
                        phrases: ['Sono insegnante', 'Lei √® insegnante', 'Insegnante di italiano']
                    },
                    'infermiere/infermiera': {
                        definition: '–º–µ–¥–±—Ä–∞—Ç/–º–µ–¥—Å–µ—Å—Ç—Ä–∞',
                        example: 'Lui √® infermiere (–û–Ω –º–µ–¥–±—Ä–∞—Ç)',
                        forms: 'infermiere (–º.—Ä.), infermiera (–∂.—Ä.)',
                        phrases: ['Sono infermiera', 'Lavoro come infermiere', 'Infermiere in ospedale']
                    },
                    'medico': {
                        definition: '–≤—Ä–∞—á',
                        example: 'Lei √® medico (–û–Ω–∞ –≤—Ä–∞—á)',
                        forms: '–û–±—ã—á–Ω–æ –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è –ø–æ —Ä–æ–¥–∞–º (il medico / la medico)',
                        phrases: ['Sono medico', 'Lavoro come medico', 'Medico in ospedale']
                    }
                }
            };

            const sampleTasks = [
                // Question words - focusing on distinctions
                {type:'multiple_choice',category:'questions',question:'___ abiti? (–ì–¥–µ —Ç—ã –∂–∏–≤–µ—à—å?)',options:['Dove','Quando','Quanto','Come'],correct:0,word:'dove'},
                {type:'multiple_choice',category:'questions',question:'___ arrivi? (–ö–æ–≥–¥–∞ —Ç—ã –ø—Ä–∏–µ–∑–∂–∞–µ—à—å?)',options:['Quando','Dove','Chi','Quanto'],correct:0,word:'quando'},
                {type:'multiple_choice',category:'questions',question:'___ costa? (–°–∫–æ–ª—å–∫–æ —Å—Ç–æ–∏—Ç?)',options:['Quanto','Quando','Dove','Chi'],correct:0,word:'quanto'},
                {type:'multiple_choice',category:'questions',question:'___ sei? (–ö—Ç–æ —Ç—ã?)',options:['Chi','Che','Dove','Come'],correct:0,word:'chi'},
                {type:'multiple_choice',category:'questions',question:'___ stai? (–ö–∞–∫ –¥–µ–ª–∞?)',options:['Come','Chi','Che','Dove'],correct:0,word:'come'},
                {type:'multiple_choice',category:'questions',question:'___ sei? (–û—Ç–∫—É–¥–∞ —Ç—ã?)',options:['Di dove','Dove','Quando','Come'],correct:0,word:'di dove'},
                {type:'multiple_choice',category:'questions',question:'___ parti? (–í–æ —Å–∫–æ–ª—å–∫–æ —Ç—ã —É–µ–∑–∂–∞–µ—à—å?)',options:['A che ora','Quando','Quanto','Dove'],correct:0,word:'a che ora'},
                {type:'translation_it_ru',category:'questions',question:'–ü–µ—Ä–µ–≤–µ–¥–∏—Ç–µ: "Che cosa fai?"',answer:'—á—Ç–æ —Ç—ã –¥–µ–ª–∞–µ—à—å',alternatives:['—á—Ç–æ —Ç—ã –¥–µ–ª–∞–µ—à—å','—á—Ç–æ –¥–µ–ª–∞–µ—à—å'],word:'che cosa'},
                {type:'fill_blanks',category:'questions',question:'–ó–∞–ø–æ–ª–Ω–∏—Ç–µ: "___ vai? - Vado a casa" (–ö—É–¥–∞ –∏–¥–µ—à—å?)',answer:'dove',hint:'(–≤–æ–ø—Ä–æ—Å –æ –º–µ—Å—Ç–µ)',word:'dove'},
                {type:'fill_blanks',category:'questions',question:'–ó–∞–ø–æ–ª–Ω–∏—Ç–µ: "___ ti chiami?" (–ö–∞–∫ —Ç–µ–±—è –∑–æ–≤—É—Ç?)',answer:'come',hint:'(–≤–æ–ø—Ä–æ—Å –æ –∏–º–µ–Ω–∏)',word:'come'},
                {type:'situational',category:'questions',question:'–°–ø—Ä–æ—Å–∏—Ç–µ –ø–æ-–∏—Ç–∞–ª—å—è–Ω—Å–∫–∏: "–°–∫–æ–ª—å–∫–æ —ç—Ç–æ —Å—Ç–æ–∏—Ç?"',context:'–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ quanto',expectedElements:['quanto','costa'],word:'quanto'},
                {type:'listening',category:'questions',question:'–ü—Ä–æ—Å–ª—É—à–∞–π—Ç–µ –∏ –ø–æ–≤—Ç–æ—Ä–∏—Ç–µ: "Dove abiti?"',audio:'Dove abiti?',word:'dove'},
                
                // VOLERE - conjugation
                {type:'multiple_choice',category:'volere',question:'Io ___ un caff√® (–Ø —Ö–æ—á—É –∫–æ—Ñ–µ)',options:['voglio','vuoi','vuole','vogliono'],correct:0,word:'volere (io voglio)'},
                {type:'multiple_choice',category:'volere',question:'Tu ___ mangiare? (–¢—ã —Ö–æ—á–µ—à—å –µ—Å—Ç—å?)',options:['vuoi','voglio','vuole','volete'],correct:0,word:'volere (tu vuoi)'},
                {type:'multiple_choice',category:'volere',question:'Lei ___ studiare (–û–Ω–∞ —Ö–æ—á–µ—Ç —É—á–∏—Ç—å—Å—è)',options:['vuole','vuoi','voglio','vogliono'],correct:0,word:'volere (lui/lei vuole)'},
                {type:'multiple_choice',category:'volere',question:'Noi ___ partire (–ú—ã —Ö–æ—Ç–∏–º —É–µ—Ö–∞—Ç—å)',options:['vogliamo','volete','vogliono','voglio'],correct:0,word:'volere (noi vogliamo)'},
                {type:'multiple_choice',category:'volere',question:'Voi ___ venire? (–í—ã —Ö–æ—Ç–∏—Ç–µ –ø—Ä–∏–π—Ç–∏?)',options:['volete','vogliamo','vogliono','vuole'],correct:0,word:'volere (voi volete)'},
                {type:'multiple_choice',category:'volere',question:'Loro ___ mangiare (–û–Ω–∏ —Ö–æ—Ç—è—Ç –µ—Å—Ç—å)',options:['vogliono','volete','vogliamo','vuole'],correct:0,word:'volere (loro vogliono)'},
                {type:'fill_blanks',category:'volere',question:'–ó–∞–ø–æ–ª–Ω–∏—Ç–µ: "Io ___ dormire" (–Ø —Ö–æ—á—É —Å–ø–∞—Ç—å)',answer:'voglio',hint:'(1 –ª–∏—Ü–æ –µ–¥.—á.)',word:'volere (io voglio)'},
                {type:'situational',category:'volere',question:'–°–∫–∞–∂–∏—Ç–µ –ø–æ-–∏—Ç–∞–ª—å—è–Ω—Å–∫–∏: "–Ø —Ö–æ—á—É –∫–æ—Ñ–µ"',context:'–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ volere',expectedElements:['voglio','caff√®'],word:'volere (io voglio)'},
                {type:'listening',category:'volere',question:'–ü—Ä–æ—Å–ª—É—à–∞–π—Ç–µ –∏ –ø–æ–≤—Ç–æ—Ä–∏—Ç–µ: "Voglio un caff√®"',audio:'Voglio un caff√®',word:'volere (io voglio)'},
                
                // POTERE - conjugation
                {type:'multiple_choice',category:'potere',question:'Io ___ venire (–Ø –º–æ–≥—É –ø—Ä–∏–π—Ç–∏)',options:['posso','puoi','pu√≤','possono'],correct:0,word:'potere (io posso)'},
                {type:'multiple_choice',category:'potere',question:'Tu ___ aiutarmi? (–¢—ã –º–æ–∂–µ—à—å –º–Ω–µ –ø–æ–º–æ—á—å?)',options:['puoi','posso','pu√≤','potete'],correct:0,word:'potere (tu puoi)'},
                {type:'multiple_choice',category:'potere',question:'Lei ___ parlare italiano (–û–Ω–∞ –º–æ–∂–µ—Ç –≥–æ–≤–æ—Ä–∏—Ç—å –ø–æ-–∏—Ç–∞–ª—å—è–Ω—Å–∫–∏)',options:['pu√≤','puoi','posso','possono'],correct:0,word:'potere (lui/lei pu√≤)'},
                {type:'multiple_choice',category:'potere',question:'Noi ___ andare (–ú—ã –º–æ–∂–µ–º –ø–æ–π—Ç–∏)',options:['possiamo','potete','possono','posso'],correct:0,word:'potere (noi possiamo)'},
                {type:'multiple_choice',category:'potere',question:'Voi ___ venire? (–í—ã –º–æ–∂–µ—Ç–µ –ø—Ä–∏–π—Ç–∏?)',options:['potete','possiamo','possono','pu√≤'],correct:0,word:'potere (voi potete)'},
                {type:'multiple_choice',category:'potere',question:'Loro ___ mangiare (–û–Ω–∏ –º–æ–≥—É—Ç –µ—Å—Ç—å)',options:['possono','potete','possiamo','pu√≤'],correct:0,word:'potere (loro possono)'},
                {type:'fill_blanks',category:'potere',question:'–ó–∞–ø–æ–ª–Ω–∏—Ç–µ: "Io ___ entrare?" (–Ø –º–æ–≥—É –≤–æ–π—Ç–∏?)',answer:'posso',hint:'(1 –ª–∏—Ü–æ –µ–¥.—á.)',word:'potere (io posso)'},
                {type:'situational',category:'potere',question:'–°–ø—Ä–æ—Å–∏—Ç–µ –ø–æ-–∏—Ç–∞–ª—å—è–Ω—Å–∫–∏: "–¢—ã –º–æ–∂–µ—à—å –ø–æ–º–æ—á—å?"',context:'–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ potere + aiutare',expectedElements:['puoi','aiutare'],word:'potere (tu puoi)'},
                {type:'listening',category:'potere',question:'–ü—Ä–æ—Å–ª—É—à–∞–π—Ç–µ –∏ –ø–æ–≤—Ç–æ—Ä–∏—Ç–µ: "Posso entrare?"',audio:'Posso entrare?',word:'potere (io posso)'},
                
                // LAVARE vs LAVORARE - key distinction
                {type:'multiple_choice',category:'lavare',question:'Io ___ i piatti ogni sera (–Ø –º–æ—é –ø–æ—Å—É–¥—É –∫–∞–∂–¥—ã–π –≤–µ—á–µ—Ä)',options:['lavo','lavoro','lavi','lavori'],correct:0,word:'lavare (io lavo)'},
                {type:'multiple_choice',category:'lavorare',question:'Io ___ in ufficio (–Ø —Ä–∞–±–æ—Ç–∞—é –≤ –æ—Ñ–∏—Å–µ)',options:['lavoro','lavo','lavori','lavi'],correct:0,word:'lavorare (io lavoro)'},
                {type:'multiple_choice',category:'lavare',question:'Devo ___ le mani (–Ø –¥–æ–ª–∂–µ–Ω –ø–æ–º—ã—Ç—å —Ä—É–∫–∏)',options:['lavare','lavorare','lavo','lavoro'],correct:0,word:'lavare i piatti'},
                {type:'multiple_choice',category:'lavorare',question:'Tu ___ domani? (–¢—ã —Ä–∞–±–æ—Ç–∞–µ—à—å –∑–∞–≤—Ç—Ä–∞?)',options:['lavori','lavi','lavoro','lavo'],correct:0,word:'lavorare (tu lavori)'},
                {type:'multiple_choice',category:'lavorare',question:'Lei ___ in ospedale (–û–Ω–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –±–æ–ª—å–Ω–∏—Ü–µ)',options:['lavora','lava','lavori','lavi'],correct:0,word:'lavorare (lui/lei lavora)'},
                {type:'fill_blanks',category:'lavare',question:'–ó–∞–ø–æ–ª–Ω–∏—Ç–µ: "Io ___ i piatti" (–Ø –º–æ—é –ø–æ—Å—É–¥—É)',answer:'lavo',hint:'(–º—ã—Ç—å –ø–æ—Å—É–¥—É)',word:'lavare (io lavo)'},
                {type:'fill_blanks',category:'lavorare',question:'–ó–∞–ø–æ–ª–Ω–∏—Ç–µ: "Io ___ a Milano" (–Ø —Ä–∞–±–æ—Ç–∞—é –≤ –ú–∏–ª–∞–Ω–µ)',answer:'lavoro',hint:'(—Ä–∞–±–æ—Ç–∞—Ç—å)',word:'lavorare (io lavoro)'},
                {type:'situational',category:'lavare',question:'–°–∫–∞–∂–∏—Ç–µ –ø–æ-–∏—Ç–∞–ª—å—è–Ω—Å–∫–∏: "–Ø –º–æ—é –ø–æ—Å—É–¥—É"',context:'–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ lavare i piatti',expectedElements:['lavo','piatti'],word:'lavare i piatti'},
                {type:'situational',category:'lavorare',question:'–°–∫–∞–∂–∏—Ç–µ –ø–æ-–∏—Ç–∞–ª—å—è–Ω—Å–∫–∏: "–Ø —Ä–∞–±–æ—Ç–∞—é –≤ –æ—Ñ–∏—Å–µ"',context:'–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ lavorare',expectedElements:['lavoro','ufficio'],word:'lavorare (io lavoro)'},
                {type:'listening',category:'lavare',question:'–ü—Ä–æ—Å–ª—É—à–∞–π—Ç–µ –∏ –ø–æ–≤—Ç–æ—Ä–∏—Ç–µ: "Lavo i piatti"',audio:'Lavo i piatti',word:'lavare i piatti'},
                {type:'listening',category:'lavorare',question:'–ü—Ä–æ—Å–ª—É—à–∞–π—Ç–µ –∏ –ø–æ–≤—Ç–æ—Ä–∏—Ç–µ: "Lavoro in ufficio"',audio:'Lavoro in ufficio',word:'lavorare (io lavoro)'},
                
                // Professions
                {type:'multiple_choice',category:'professions',question:'Sono ___ di italiano (–Ø —É—á–∏—Ç–µ–ª—å –∏—Ç–∞–ª—å—è–Ω—Å–∫–æ–≥–æ)',options:['insegnante','infermiere','medico','studente'],correct:0,word:'insegnante'},
                {type:'multiple_choice',category:'professions',question:'Lui √® ___ in ospedale (–û–Ω –º–µ–¥–±—Ä–∞—Ç –≤ –±–æ–ª—å–Ω–∏—Ü–µ)',options:['infermiere','insegnante','medico','dottore'],correct:0,word:'infermiere/infermiera'},
                {type:'multiple_choice',category:'professions',question:'Lei √® ___ (–û–Ω–∞ –≤—Ä–∞—á)',options:['medico','infermiera','insegnante','dottoressa'],correct:0,word:'medico'},
                {type:'translation_it_ru',category:'professions',question:'–ü–µ—Ä–µ–≤–µ–¥–∏—Ç–µ: "Sono insegnante"',answer:'—è —É—á–∏—Ç–µ–ª—å',alternatives:['—è —É—á–∏—Ç–µ–ª—å','—è —É—á–∏—Ç–µ–ª—å–Ω–∏—Ü–∞'],word:'insegnante'},
                {type:'fill_blanks',category:'professions',question:'–ó–∞–ø–æ–ª–Ω–∏—Ç–µ: "Lavoro come ___" (–Ø —Ä–∞–±–æ—Ç–∞—é –≤—Ä–∞—á–æ–º)',answer:'medico',hint:'(–ø—Ä–æ—Ñ–µ—Å—Å–∏—è: –≤—Ä–∞—á)',word:'medico'},
                {type:'situational',category:'professions',question:'–°–∫–∞–∂–∏—Ç–µ –ø–æ-–∏—Ç–∞–ª—å—è–Ω—Å–∫–∏: "–Ø —É—á–∏—Ç–µ–ª—å"',context:'–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ insegnante',expectedElements:['sono','insegnante'],word:'insegnante'},
                {type:'listening',category:'professions',question:'–ü—Ä–æ—Å–ª—É—à–∞–π—Ç–µ –∏ –ø–æ–≤—Ç–æ—Ä–∏—Ç–µ: "Sono insegnante"',audio:'Sono insegnante',word:'insegnante'},
                
                // Mixed tasks for confusion prevention
                {type:'multiple_choice',category:'all',question:'___ vai? - Vado al lavoro (–ö—É–¥–∞ –∏–¥–µ—à—å? - –ò–¥—É –Ω–∞ —Ä–∞–±–æ—Ç—É)',options:['Dove','Quando','Quanto','Come'],correct:0,word:'mixed'},
                {type:'multiple_choice',category:'all',question:'Io ___ i piatti e poi ___ (–Ø –º–æ—é –ø–æ—Å—É–¥—É –∏ –ø–æ—Ç–æ–º —Ä–∞–±–æ—Ç–∞—é)',options:['lavo, lavoro','lavoro, lavo','lavo, lavo','lavoro, lavoro'],correct:0,word:'mixed'},
                {type:'multiple_choice',category:'all',question:'___ stai? - Bene, grazie (–ö–∞–∫ –¥–µ–ª–∞? - –•–æ—Ä–æ—à–æ, —Å–ø–∞—Å–∏–±–æ)',options:['Come','Dove','Quando','Chi'],correct:0,word:'mixed'},
                {type:'multiple_choice',category:'all',question:'Tu ___ venire domani? (–¢—ã –º–æ–∂–µ—à—å –ø—Ä–∏–π—Ç–∏ –∑–∞–≤—Ç—Ä–∞?)',options:['puoi','vuoi','posso','voglio'],correct:0,word:'mixed'}
            ];

            const generateRandomTask = () => {
                const filteredTasks = selectedCategory === 'all' 
                    ? sampleTasks 
                    : sampleTasks.filter(task => task.category === selectedCategory);
                
                const randomTask = filteredTasks[Math.floor(Math.random() * filteredTasks.length)];
                setCurrentTask({...randomTask, id: Date.now()});
                setUserAnswer('');
                setShowResult(null);
            };

            const checkAnswer = () => {
                if (!currentTask) return;
                
                let isCorrect = false;
                
                switch(currentTask.type) {
                    case 'multiple_choice':
                        isCorrect = parseInt(userAnswer) === currentTask.correct;
                        break;
                    case 'translation_it_ru':
                    case 'fill_blanks':
                        const normalizedAnswer = userAnswer.toLowerCase().trim();
                        if (currentTask.alternatives) {
                            isCorrect = currentTask.alternatives.some(alt => 
                                alt.toLowerCase() === normalizedAnswer
                            );
                        } else {
                            isCorrect = normalizedAnswer === currentTask.answer.toLowerCase();
                        }
                        break;
                    case 'situational':
                        isCorrect = currentTask.expectedElements.every(element =>
                            userAnswer.toLowerCase().includes(element.toLowerCase())
                        );
                        break;
                    default:
                        isCorrect = true;
                }
                
                setScore(prev => ({
                    correct: prev.correct + (isCorrect ? 1 : 0),
                    total: prev.total + 1
                }));
                
                setShowResult(isCorrect);
            };

            const speakText = (text) => {
                if ('speechSynthesis' in window) {
                    window.speechSynthesis.cancel();
                    
                    const utterance = new SpeechSynthesisUtterance(text);
                    utterance.lang = 'it-IT';
                    utterance.rate = 0.75;
                    utterance.pitch = 1.0;
                    utterance.volume = 1.0;
                    
                    const setVoice = () => {
                        const voices = window.speechSynthesis.getVoices();
                        const preferredVoices = [
                            voices.find(voice => voice.name.toLowerCase().includes('google') && voice.lang.startsWith('it')),
                            voices.find(voice => voice.name.toLowerCase().includes('microsoft') && voice.lang.startsWith('it')),
                            voices.find(voice => voice.lang === 'it-IT'),
                            voices.find(voice => voice.lang.startsWith('it'))
                        ];
                        
                        const selectedVoice = preferredVoices.find(voice => voice !== undefined);
                        if (selectedVoice) utterance.voice = selectedVoice;
                        
                        try {
                            window.speechSynthesis.speak(utterance);
                        } catch (error) {
                            console.error('Speech error:', error);
                        }
                    };
                    
                    if (window.speechSynthesis.getVoices().length > 0) {
                        setVoice();
                    } else {
                        window.speechSynthesis.onvoiceschanged = () => {
                            setVoice();
                            window.speechSynthesis.onvoiceschanged = null;
                        };
                        setTimeout(() => {
                            if (window.speechSynthesis.getVoices().length === 0) {
                                window.speechSynthesis.speak(utterance);
                            }
                        }, 1000);
                    }
                }
            };

            const startRecording = async () => {
                if (!('webkitSpeechRecognition' in window) && !('SpeechRecognition' in window)) {
                    alert('–í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–µ—á–∏. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ Chrome –∏–ª–∏ Edge.');
                    return;
                }

                try {
                    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                    const recognition = new SpeechRecognition();
                    
                    recognition.lang = 'it-IT';
                    recognition.continuous = false;
                    recognition.interimResults = false;
                    
                    recognition.onstart = () => {
                        setIsRecording(true);
                        setUserAnswer('Parla...');
                    };
                    
                    recognition.onresult = (event) => {
                        const transcript = event.results[0][0].transcript.trim();
                        setUserAnswer(transcript);
                        setIsRecording(false);
                        
                        if (currentTask && currentTask.type === 'listening') {
                            setTimeout(() => {
                                checkAnswer();
                            }, 1000);
                        }
                    };
                    
                    recognition.onerror = (event) => {
                        setIsRecording(false);
                        setUserAnswer('Errore: ' + event.error);
                    };
                    
                    recognition.onend = () => {
                        setIsRecording(false);
                    };
                    
                    recognition.start();
                    
                } catch (error) {
                    setIsRecording(false);
                    setUserAnswer('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–ø—É—Å—Ç–∏—Ç—å —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–µ—á–∏');
                }
            };

            const stopRecording = () => {
                setIsRecording(false);
            };

            useEffect(() => {
                generateRandomTask();
            }, [selectedCategory]);

            const renderTask = () => {
                if (!currentTask) return null;

                switch(currentTask.type) {
                    case 'multiple_choice':
                        return (
                            <div className="space-y-4">
                                <p className="text-lg font-medium">{currentTask.question}</p>
                                <div className="grid grid-cols-2 gap-2">
                                    {currentTask.options.map((option, index) => (
                                        <button
                                            key={index}
                                            onClick={() => setUserAnswer(index.toString())}
                                            className={`p-3 border rounded-lg transition-colors ${
                                                userAnswer === index.toString()
                                                    ? 'bg-green-600 text-white'
                                                    : 'bg-white hover:bg-green-50'
                                            }`}
                                        >
                                            {option}
                                        </button>
                                    ))}
                                </div>
                            </div>
                        );
                    
                    case 'listening':
                        return (
                            <div className="space-y-4">
                                <p className="text-lg font-medium">{currentTask.question}</p>
                                <button
                                    onClick={() => speakText(currentTask.audio)}
                                    className="flex items-center gap-2 bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600"
                                >
                                    <Volume2 size={20} />
                                    Ascolta
                                </button>
                                <div className="flex items-center gap-2">
                                    <button
                                        onClick={isRecording ? stopRecording : startRecording}
                                        className={`flex items-center gap-2 px-4 py-2 rounded-lg ${
                                            isRecording 
                                                ? 'bg-red-500 hover:bg-red-600' 
                                                : 'bg-green-600 hover:bg-green-700'
                                        } text-white`}
                                    >
                                        {isRecording ? <MicOff size={20} /> : <Mic size={20} />}
                                        {isRecording ? 'Stop' : 'Registra'}
                                    </button>
                                </div>
                            </div>
                        );
                    
                    case 'situational':
                        return (
                            <div className="space-y-4">
                                <div className="bg-yellow-50 p-4 rounded-lg">
                                    <h3 className="font-semibold text-yellow-800">–ó–∞–¥–∞–Ω–∏–µ:</h3>
                                    <p className="text-yellow-700">{currentTask.question}</p>
                                    {currentTask.context && (
                                        <p className="text-sm text-yellow-600 mt-2">
                                            {currentTask.context}
                                        </p>
                                    )}
                                </div>
                                <input
                                    type="text"
                                    value={userAnswer}
                                    onChange={(e) => setUserAnswer(e.target.value)}
                                    placeholder="Scrivi la tua risposta..."
                                    className="w-full p-3 border border-gray-300 rounded-lg"
                                    onKeyPress={(e) => e.key === 'Enter' && checkAnswer()}
                                />
                            </div>
                        );
                    
                    default:
                        return (
                            <div className="space-y-4">
                                <p className="text-lg font-medium">{currentTask.question}</p>
                                {currentTask.hint && (
                                    <p className="text-sm text-gray-600">{currentTask.hint}</p>
                                )}
                                <input
                                    type="text"
                                    value={userAnswer}
                                    onChange={(e) => setUserAnswer(e.target.value)}
                                    placeholder="Scrivi la tua risposta..."
                                    className="w-full p-3 border border-gray-300 rounded-lg"
                                    onKeyPress={(e) => e.key === 'Enter' && checkAnswer()}
                                />
                                <div className="flex gap-2">
                                    <button
                                        onClick={isRecording ? stopRecording : startRecording}
                                        className={`flex items-center gap-2 px-4 py-2 rounded-lg ${
                                            isRecording 
                                                ? 'bg-red-500 hover:bg-red-600' 
                                                : 'bg-green-600 hover:bg-green-700'
                                        } text-white`}
                                    >
                                        {isRecording ? <MicOff size={20} /> : <Mic size={20} />}
                                        Voce
                                    </button>
                                </div>
                            </div>
                        );
                }
            };

            const renderVocabulary = () => (
                <div className="space-y-6">
                    {Object.entries(vocabulary).map(([category, words]) => (
                        <div key={category} className="bg-white rounded-lg p-6 shadow-sm border">
                            <h3 className="text-xl font-semibold mb-4 text-green-700">
                                {category === 'questions' ? '‚ùì –í–æ–ø—Ä–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ —Å–ª–æ–≤–∞' :
                                 category === 'volere' ? 'üíö Volere (—Ö–æ—Ç–µ—Ç—å)' : 
                                 category === 'potere' ? 'üí™ Potere (–º–æ—á—å)' :
                                 category === 'lavare' ? 'üßº Lavare (–º—ã—Ç—å)' :
                                 category === 'lavorare' ? 'üíº Lavorare (—Ä–∞–±–æ—Ç–∞—Ç—å)' : 'üë®‚Äç‚öïÔ∏è –ü—Ä–æ—Ñ–µ—Å—Å–∏–∏'}
                            </h3>
                            <div className="grid gap-4">
                                {Object.entries(words).map(([word, info]) => (
                                    <div key={word} className="border-l-4 border-green-200 pl-4">
                                        <div className="flex items-center justify-between">
                                            <h4 className="font-semibold text-lg">{word}</h4>
                                            <button
                                                onClick={() => speakText(word)}
                                                className="text-green-600 hover:text-green-800"
                                            >
                                                <Volume2 size={20} />
                                            </button>
                                        </div>
                                        <p className="text-gray-600">{info.definition}</p>
                                        <div className="flex items-center gap-2 mt-2">
                                            <p className="text-blue-700 flex-1">{info.example}</p>
                                            <button
                                                onClick={() => speakText(info.example.split(' (')[0])}
                                                className="text-blue-600 hover:text-blue-800"
                                            >
                                                <Volume2 size={16} />
                                            </button>
                                        </div>
                                        <div className="mt-2">
                                            <p className="text-sm text-gray-500 mb-2">{info.forms}</p>
                                            {info.phrases && (
                                                <div className="space-y-1">
                                                    {info.phrases.map((phrase, index) => (
                                                        <div key={index} className="flex items-center gap-2">
                                                            <span className="text-sm text-green-600">‚Ä¢ {phrase}</span>
                                                            <button
                                                                onClick={() => speakText(phrase)}
                                                                className="text-green-600 hover:text-green-800"
                                                            >
                                                                <Volume2 size={14} />
                                                            </button>
                                                        </div>
                                                    ))}
                                                </div>
                                            )}
                                        </div>
                                    </div>
                                ))}
                            </div>
                        </div>
                    ))}
                </div>
            );

            return (
                <div className="max-w-4xl mx-auto bg-gradient-to-b from-green-50 to-red-50 min-h-screen">
                    <div className="bg-gradient-to-r from-green-600 to-red-600 text-white p-6">
                        <h1 className="text-2xl font-bold flex items-center gap-2">
                            <Flag size={28} />
                            Italiano A0-A1 üáÆüáπ
                        </h1>
                        <p className="mt-2 opacity-90">
                            –í–æ–ø—Ä–æ—Å—ã ‚Ä¢ Volere & Potere ‚Ä¢ Lavare vs Lavorare ‚Ä¢ Professioni
                        </p>
                        <div className="mt-4 flex gap-4 text-sm">
                            <span>–ü—Ä–∞–≤–∏–ª—å–Ω–æ: {score.correct}</span>
                            <span>–í—Å–µ–≥–æ: {score.total}</span>
                            <span>–¢–æ—á–Ω–æ—Å—Ç—å: {score.total > 0 ? Math.round((score.correct / score.total) * 100) : 0}%</span>
                        </div>
                    </div>

                    <div className="flex border-b bg-white">
                        <button
                            onClick={() => setActiveTab('tasks')}
                            className={`flex-1 p-4 text-center font-medium ${
                                activeTab === 'tasks' 
                                    ? 'border-b-2 border-green-600 text-green-700' 
                                    : 'text-gray-600 hover:text-gray-800'
                            }`}
                        >
                            <MessageCircle className="mx-auto mb-1" size={20} />
                            Esercizi
                        </button>
                        <button
                            onClick={() => setActiveTab('vocabulary')}
                            className={`flex-1 p-4 text-center font-medium ${
                                activeTab === 'vocabulary' 
                                    ? 'border-b-2 border-green-600 text-green-700' 
                                    : 'text-gray-600 hover:text-gray-800'
                            }`}
                        >
                            <Users className="mx-auto mb-1" size={20} />
                            Vocabolario
                        </button>
                    </div>

                    <div className="p-6">
                        {activeTab === 'tasks' && (
                            <div className="space-y-6">
                                <div className="flex gap-2 flex-wrap">
                                    <button onClick={() => setSelectedCategory('all')} className={`px-4 py-2 rounded-lg ${selectedCategory === 'all' ? 'bg-green-600 text-white' : 'bg-white border hover:bg-green-50'}`}>Tutti</button>
                                    <button onClick={() => setSelectedCategory('questions')} className={`px-4 py-2 rounded-lg ${selectedCategory === 'questions' ? 'bg-green-600 text-white' : 'bg-white border hover:bg-green-50'}`}>‚ùì Domande</button>
                                    <button onClick={() => setSelectedCategory('volere')} className={`px-4 py-2 rounded-lg ${selectedCategory === 'volere' ? 'bg-green-600 text-white' : 'bg-white border hover:bg-green-50'}`}>üíö Volere</button>
                                    <button onClick={() => setSelectedCategory('potere')} className={`px-4 py-2 rounded-lg ${selectedCategory === 'potere' ? 'bg-green-600 text-white' : 'bg-white border hover:bg-green-50'}`}>üí™ Potere</button>
                                    <button onClick={() => setSelectedCategory('lavare')} className={`px-4 py-2 rounded-lg ${selectedCategory === 'lavare' ? 'bg-green-600 text-white' : 'bg-white border hover:bg-green-50'}`}>üßº Lavare</button>
                                    <button onClick={() => setSelectedCategory('lavorare')} className={`px-4 py-2 rounded-lg ${selectedCategory === 'lavorare' ? 'bg-green-600 text-white' : 'bg-white border hover:bg-green-50'}`}>üíº Lavorare</button>
                                    <button onClick={() => setSelectedCategory('professions')} className={`px-4 py-2 rounded-lg ${selectedCategory === 'professions' ? 'bg-green-600 text-white' : 'bg-white border hover:bg-green-50'}`}>üë®‚Äç‚öïÔ∏è Professioni</button>
                                </div>

                                <div className="bg-white rounded-lg p-6 shadow-sm border">
                                    {showResult !== null && (
                                        <div className={`mb-4 p-4 rounded-lg flex items-center gap-2 ${showResult ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}`}>
                                            {showResult ? <CheckCircle size={20} /> : <XCircle size={20} />}
                                            {showResult ? 'Corretto! üéâ' : `Sbagliato. Risposta corretta: ${currentTask?.answer || currentTask?.options?.[currentTask?.correct] || 'vedi sopra'}`}
                                        </div>
                                    )}
                                    
                                    {renderTask()}
                                    
                                    {currentTask && (
                                        <div className="mt-6 flex gap-3">
                                            {showResult === null ? (
                                                <button onClick={checkAnswer} disabled={!userAnswer.trim()} className="bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600 disabled:bg-gray-400 disabled:cursor-not-allowed">Controlla</button>
                                            ) : (
                                                <button onClick={generateRandomTask} className="bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 flex items-center gap-2"><RotateCcw size={16} />Prossimo</button>
                                            )}
                                            <button onClick={generateRandomTask} className="bg-gray-500 text-white px-6 py-2 rounded-lg hover:bg-gray-600 flex items-center gap-2"><RotateCcw size={16} />Nuovo</button>
                                        </div>
                                    )}
                                </div>

                                {currentTask?.word && vocabulary[currentTask.category]?.[currentTask.word] && (
                                    <div className="bg-green-50 rounded-lg p-4">
                                        <h3 className="font-semibold text-green-800 mb-2">Parola studiata:</h3>
                                        <div className="text-green-700">
                                            <p className="font-medium">{currentTask.word}</p>
                                            <p className="text-sm">{vocabulary[currentTask.category][currentTask.word].forms}</p>
                                        </div>
                                    </div>
                                )}
                            </div>
                        )}

                        {activeTab === 'vocabulary' && renderVocabulary()}
                    </div>
                </div>
            );
        };

        ReactDOM.render(React.createElement(ItalianBasicApp), document.getElementById('root'));
    </script>
</body>
</html>
